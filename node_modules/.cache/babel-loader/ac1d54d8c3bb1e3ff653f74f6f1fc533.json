{"ast":null,"code":"\"use strict\";\n\nvar _toConsumableArray = require(\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/toConsumableArray.js\").default;\n\nvar _createForOfIteratorHelper = require(\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js\").default;\n\nvar _defineProperty = require(\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/defineProperty.js\").default;\n\nvar _classCallCheck = require(\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/classCallCheck.js\").default;\n\nvar _createClass = require(\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/createClass.js\").default;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Config = exports.LintConfig = exports.AVAILABLE_REGIONS = exports.DOMAINS = exports.DEFAULT_REGION = exports.IGNORE_FILE = exports.env = void 0;\n\nvar fs = require(\"fs\");\n\nvar path = require(\"path\");\n\nvar js_yaml_1 = require(\"../js-yaml\");\n\nvar utils_1 = require(\"../utils\");\n\nvar oas_types_1 = require(\"../oas-types\");\n\nvar utils_2 = require(\"./utils\"); // Alias environment here so this file can work in browser environments too.\n\n\nexports.env = typeof process !== 'undefined' ? process.env || {} : {};\nexports.IGNORE_FILE = '.redocly.lint-ignore.yaml';\nvar IGNORE_BANNER = \"# This file instructs Redocly's linter to ignore the rules contained for specific parts of your API.\\n\" + \"# See https://redoc.ly/docs/cli/ for more information.\\n\";\nexports.DEFAULT_REGION = 'us';\n\nfunction getDomains() {\n  var domains = {\n    us: 'redocly.com',\n    eu: 'eu.redocly.com'\n  }; // FIXME: temporary fix for our lab environments\n\n  var domain = exports.env.REDOCLY_DOMAIN;\n\n  if (domain === null || domain === void 0 ? void 0 : domain.endsWith('.redocly.host')) {\n    domains[domain.split('.')[0]] = domain;\n  }\n\n  if (domain === 'redoc.online') {\n    domains[domain] = domain;\n  }\n\n  return domains;\n}\n\nexports.DOMAINS = getDomains();\nexports.AVAILABLE_REGIONS = Object.keys(exports.DOMAINS);\n\nvar LintConfig = /*#__PURE__*/function () {\n  function LintConfig(rawConfig, configFile) {\n    var _this$rules, _this$preprocessors, _this$decorators;\n\n    _classCallCheck(this, LintConfig);\n\n    this.rawConfig = rawConfig;\n    this.configFile = configFile;\n    this.ignore = {};\n    this._usedRules = new Set();\n    this._usedVersions = new Set();\n    this.plugins = rawConfig.plugins || [];\n    this.doNotResolveExamples = !!rawConfig.doNotResolveExamples;\n    this.recommendedFallback = rawConfig.recommendedFallback || false;\n    this.rules = (_this$rules = {}, _defineProperty(_this$rules, oas_types_1.OasVersion.Version2, Object.assign(Object.assign({}, rawConfig.rules), rawConfig.oas2Rules)), _defineProperty(_this$rules, oas_types_1.OasVersion.Version3_0, Object.assign(Object.assign({}, rawConfig.rules), rawConfig.oas3_0Rules)), _defineProperty(_this$rules, oas_types_1.OasVersion.Version3_1, Object.assign(Object.assign({}, rawConfig.rules), rawConfig.oas3_1Rules)), _this$rules);\n    this.preprocessors = (_this$preprocessors = {}, _defineProperty(_this$preprocessors, oas_types_1.OasVersion.Version2, Object.assign(Object.assign({}, rawConfig.preprocessors), rawConfig.oas2Preprocessors)), _defineProperty(_this$preprocessors, oas_types_1.OasVersion.Version3_0, Object.assign(Object.assign({}, rawConfig.preprocessors), rawConfig.oas3_0Preprocessors)), _defineProperty(_this$preprocessors, oas_types_1.OasVersion.Version3_1, Object.assign(Object.assign({}, rawConfig.preprocessors), rawConfig.oas3_1Preprocessors)), _this$preprocessors);\n    this.decorators = (_this$decorators = {}, _defineProperty(_this$decorators, oas_types_1.OasVersion.Version2, Object.assign(Object.assign({}, rawConfig.decorators), rawConfig.oas2Decorators)), _defineProperty(_this$decorators, oas_types_1.OasVersion.Version3_0, Object.assign(Object.assign({}, rawConfig.decorators), rawConfig.oas3_0Decorators)), _defineProperty(_this$decorators, oas_types_1.OasVersion.Version3_1, Object.assign(Object.assign({}, rawConfig.decorators), rawConfig.oas3_1Decorators)), _this$decorators);\n    this.extendPaths = rawConfig.extendPaths || [];\n    this.pluginPaths = rawConfig.pluginPaths || [];\n    var dir = this.configFile ? path.dirname(this.configFile) : typeof process !== 'undefined' && process.cwd() || '';\n    var ignoreFile = path.join(dir, exports.IGNORE_FILE);\n    /* no crash when using it on the client */\n\n    if (fs.hasOwnProperty('existsSync') && fs.existsSync(ignoreFile)) {\n      // TODO: parse errors\n      this.ignore = js_yaml_1.parseYaml(fs.readFileSync(ignoreFile, 'utf-8')) || {}; // resolve ignore paths\n\n      for (var _i = 0, _Object$keys = Object.keys(this.ignore); _i < _Object$keys.length; _i++) {\n        var fileName = _Object$keys[_i];\n        this.ignore[path.resolve(path.dirname(ignoreFile), fileName)] = this.ignore[fileName];\n\n        for (var _i2 = 0, _Object$keys2 = Object.keys(this.ignore[fileName]); _i2 < _Object$keys2.length; _i2++) {\n          var ruleId = _Object$keys2[_i2];\n          this.ignore[fileName][ruleId] = new Set(this.ignore[fileName][ruleId]);\n        }\n\n        delete this.ignore[fileName];\n      }\n    }\n  }\n\n  _createClass(LintConfig, [{\n    key: \"saveIgnore\",\n    value: function saveIgnore() {\n      var dir = this.configFile ? path.dirname(this.configFile) : process.cwd();\n      var ignoreFile = path.join(dir, exports.IGNORE_FILE);\n      var mapped = {};\n\n      for (var _i3 = 0, _Object$keys3 = Object.keys(this.ignore); _i3 < _Object$keys3.length; _i3++) {\n        var absFileName = _Object$keys3[_i3];\n        var ignoredRules = mapped[utils_1.slash(path.relative(dir, absFileName))] = this.ignore[absFileName];\n\n        for (var _i4 = 0, _Object$keys4 = Object.keys(ignoredRules); _i4 < _Object$keys4.length; _i4++) {\n          var ruleId = _Object$keys4[_i4];\n          ignoredRules[ruleId] = Array.from(ignoredRules[ruleId]);\n        }\n      }\n\n      fs.writeFileSync(ignoreFile, IGNORE_BANNER + js_yaml_1.stringifyYaml(mapped));\n    }\n  }, {\n    key: \"addIgnore\",\n    value: function addIgnore(problem) {\n      var ignore = this.ignore;\n      var loc = problem.location[0];\n      if (loc.pointer === undefined) return;\n      var fileIgnore = ignore[loc.source.absoluteRef] = ignore[loc.source.absoluteRef] || {};\n      var ruleIgnore = fileIgnore[problem.ruleId] = fileIgnore[problem.ruleId] || new Set();\n      ruleIgnore.add(loc.pointer);\n    }\n  }, {\n    key: \"addProblemToIgnore\",\n    value: function addProblemToIgnore(problem) {\n      var loc = problem.location[0];\n      if (loc.pointer === undefined) return problem;\n      var fileIgnore = this.ignore[loc.source.absoluteRef] || {};\n      var ruleIgnore = fileIgnore[problem.ruleId];\n      var ignored = ruleIgnore && ruleIgnore.has(loc.pointer);\n      return ignored ? Object.assign(Object.assign({}, problem), {\n        ignored: ignored\n      }) : problem;\n    }\n  }, {\n    key: \"extendTypes\",\n    value: function extendTypes(types, version) {\n      var extendedTypes = types;\n\n      var _iterator = _createForOfIteratorHelper(this.plugins),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var plugin = _step.value;\n\n          if (plugin.typeExtension !== undefined) {\n            switch (version) {\n              case oas_types_1.OasVersion.Version3_0:\n              case oas_types_1.OasVersion.Version3_1:\n                if (!plugin.typeExtension.oas3) continue;\n                extendedTypes = plugin.typeExtension.oas3(extendedTypes, version);\n\n              case oas_types_1.OasVersion.Version2:\n                if (!plugin.typeExtension.oas2) continue;\n                extendedTypes = plugin.typeExtension.oas2(extendedTypes, version);\n\n              default:\n                throw new Error('Not implemented');\n            }\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return extendedTypes;\n    }\n  }, {\n    key: \"getRuleSettings\",\n    value: function getRuleSettings(ruleId, oasVersion) {\n      this._usedRules.add(ruleId);\n\n      this._usedVersions.add(oasVersion);\n\n      var settings = this.rules[oasVersion][ruleId] || 'off';\n\n      if (typeof settings === 'string') {\n        return {\n          severity: settings\n        };\n      } else {\n        return Object.assign({\n          severity: 'error'\n        }, settings);\n      }\n    }\n  }, {\n    key: \"getPreprocessorSettings\",\n    value: function getPreprocessorSettings(ruleId, oasVersion) {\n      this._usedRules.add(ruleId);\n\n      this._usedVersions.add(oasVersion);\n\n      var settings = this.preprocessors[oasVersion][ruleId] || 'off';\n\n      if (typeof settings === 'string') {\n        return {\n          severity: settings === 'on' ? 'error' : settings\n        };\n      } else {\n        return Object.assign({\n          severity: 'error'\n        }, settings);\n      }\n    }\n  }, {\n    key: \"getDecoratorSettings\",\n    value: function getDecoratorSettings(ruleId, oasVersion) {\n      this._usedRules.add(ruleId);\n\n      this._usedVersions.add(oasVersion);\n\n      var settings = this.decorators[oasVersion][ruleId] || 'off';\n\n      if (typeof settings === 'string') {\n        return {\n          severity: settings === 'on' ? 'error' : settings\n        };\n      } else {\n        return Object.assign({\n          severity: 'error'\n        }, settings);\n      }\n    }\n  }, {\n    key: \"getUnusedRules\",\n    value: function getUnusedRules() {\n      var _this = this;\n\n      var rules = [];\n      var decorators = [];\n      var preprocessors = [];\n\n      for (var _i5 = 0, _Array$from = Array.from(this._usedVersions); _i5 < _Array$from.length; _i5++) {\n        var usedVersion = _Array$from[_i5];\n        rules.push.apply(rules, _toConsumableArray(Object.keys(this.rules[usedVersion]).filter(function (name) {\n          return !_this._usedRules.has(name);\n        })));\n        decorators.push.apply(decorators, _toConsumableArray(Object.keys(this.decorators[usedVersion]).filter(function (name) {\n          return !_this._usedRules.has(name);\n        })));\n        preprocessors.push.apply(preprocessors, _toConsumableArray(Object.keys(this.preprocessors[usedVersion]).filter(function (name) {\n          return !_this._usedRules.has(name);\n        })));\n      }\n\n      return {\n        rules: rules,\n        preprocessors: preprocessors,\n        decorators: decorators\n      };\n    }\n  }, {\n    key: \"getRulesForOasVersion\",\n    value: function getRulesForOasVersion(version) {\n      switch (version) {\n        case oas_types_1.OasMajorVersion.Version3:\n          var oas3Rules = []; // default ruleset\n\n          this.plugins.forEach(function (p) {\n            var _a;\n\n            return ((_a = p.preprocessors) === null || _a === void 0 ? void 0 : _a.oas3) && oas3Rules.push(p.preprocessors.oas3);\n          });\n          this.plugins.forEach(function (p) {\n            var _a;\n\n            return ((_a = p.rules) === null || _a === void 0 ? void 0 : _a.oas3) && oas3Rules.push(p.rules.oas3);\n          });\n          this.plugins.forEach(function (p) {\n            var _a;\n\n            return ((_a = p.decorators) === null || _a === void 0 ? void 0 : _a.oas3) && oas3Rules.push(p.decorators.oas3);\n          });\n          return oas3Rules;\n\n        case oas_types_1.OasMajorVersion.Version2:\n          var oas2Rules = []; // default ruleset\n\n          this.plugins.forEach(function (p) {\n            var _a;\n\n            return ((_a = p.preprocessors) === null || _a === void 0 ? void 0 : _a.oas2) && oas2Rules.push(p.preprocessors.oas2);\n          });\n          this.plugins.forEach(function (p) {\n            var _a;\n\n            return ((_a = p.rules) === null || _a === void 0 ? void 0 : _a.oas2) && oas2Rules.push(p.rules.oas2);\n          });\n          this.plugins.forEach(function (p) {\n            var _a;\n\n            return ((_a = p.decorators) === null || _a === void 0 ? void 0 : _a.oas2) && oas2Rules.push(p.decorators.oas2);\n          });\n          return oas2Rules;\n      }\n    }\n  }, {\n    key: \"skipRules\",\n    value: function skipRules(rules) {\n      var _iterator2 = _createForOfIteratorHelper(rules || []),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var ruleId = _step2.value;\n\n          for (var _i6 = 0, _Object$values = Object.values(oas_types_1.OasVersion); _i6 < _Object$values.length; _i6++) {\n            var version = _Object$values[_i6];\n\n            if (this.rules[version][ruleId]) {\n              this.rules[version][ruleId] = 'off';\n            }\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    }\n  }, {\n    key: \"skipPreprocessors\",\n    value: function skipPreprocessors(preprocessors) {\n      var _iterator3 = _createForOfIteratorHelper(preprocessors || []),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var preprocessorId = _step3.value;\n\n          for (var _i7 = 0, _Object$values2 = Object.values(oas_types_1.OasVersion); _i7 < _Object$values2.length; _i7++) {\n            var version = _Object$values2[_i7];\n\n            if (this.preprocessors[version][preprocessorId]) {\n              this.preprocessors[version][preprocessorId] = 'off';\n            }\n          }\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    }\n  }, {\n    key: \"skipDecorators\",\n    value: function skipDecorators(decorators) {\n      var _iterator4 = _createForOfIteratorHelper(decorators || []),\n          _step4;\n\n      try {\n        for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n          var decoratorId = _step4.value;\n\n          for (var _i8 = 0, _Object$values3 = Object.values(oas_types_1.OasVersion); _i8 < _Object$values3.length; _i8++) {\n            var version = _Object$values3[_i8];\n\n            if (this.decorators[version][decoratorId]) {\n              this.decorators[version][decoratorId] = 'off';\n            }\n          }\n        }\n      } catch (err) {\n        _iterator4.e(err);\n      } finally {\n        _iterator4.f();\n      }\n    }\n  }]);\n\n  return LintConfig;\n}();\n\nexports.LintConfig = LintConfig;\n\nvar Config = /*#__PURE__*/_createClass(function Config(rawConfig, configFile) {\n  _classCallCheck(this, Config);\n\n  this.rawConfig = rawConfig;\n  this.configFile = configFile;\n  this.apis = rawConfig.apis || {};\n  this.lint = new LintConfig(rawConfig.lint || {}, configFile);\n  this['features.openapi'] = rawConfig['features.openapi'] || {};\n  this['features.mockServer'] = rawConfig['features.mockServer'] || {};\n  this.resolve = utils_2.getResolveConfig(rawConfig === null || rawConfig === void 0 ? void 0 : rawConfig.resolve);\n  this.region = rawConfig.region;\n  this.organization = rawConfig.organization;\n});\n\nexports.Config = Config;","map":null,"metadata":{},"sourceType":"script"}