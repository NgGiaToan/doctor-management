{"ast":null,"code":"import _defineProperty from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";var _extraReducers;import _regeneratorRuntime from\"C:\\\\Users\\\\giato\\\\Downloads\\\\Workspace\\\\.Net\\\\api\\\\doctor-management-fe\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";/* eslint import/no-extraneous-dependencies: off */import{createAsyncThunk,createSlice}from'@reduxjs/toolkit';import history from'@history';import _ from'@lodash';import{setInitialSettings}from'app/store/fuse/settingsSlice';import{showMessage}from'app/store/fuse/messageSlice';import settingsConfig from'app/configs/settingsConfig';import jwtService from'../auth/services/jwtService';export var setUser=createAsyncThunk('user/setUser',/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(user,_ref){var dispatch,getState;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:dispatch=_ref.dispatch,getState=_ref.getState;/*\r\n    You can redirect the logged-in user to a specific route depending on his role\r\n    */if(user.loginRedirectUrl){settingsConfig.loginRedirectUrl=user.loginRedirectUrl;// for example 'apps/academy'\n}return _context.abrupt(\"return\",user);case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}());export var updateUserSettings=createAsyncThunk('user/updateSettings',/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(settings,_ref3){var dispatch,getState,_getState,user,newUser;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch=_ref3.dispatch,getState=_ref3.getState;_getState=getState(),user=_getState.user;newUser=_.merge({},user,{data:{settings:settings}});dispatch(updateUserData(newUser));return _context2.abrupt(\"return\",newUser);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref4.apply(this,arguments);};}());export var updateUserShortcuts=createAsyncThunk('user/updateShortucts',/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(shortcuts,_ref5){var dispatch,getState,_getState2,user,newUser;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:dispatch=_ref5.dispatch,getState=_ref5.getState;_getState2=getState(),user=_getState2.user;newUser=_objectSpread(_objectSpread({},user),{},{data:_objectSpread(_objectSpread({},user.data),{},{shortcuts:shortcuts})});dispatch(updateUserData(newUser));return _context3.abrupt(\"return\",newUser);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x5,_x6){return _ref6.apply(this,arguments);};}());export var logoutUser=function logoutUser(){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var _getState3,user;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_getState3=getState(),user=_getState3.user;if(!(!user.role||user.role.length===0)){_context4.next=3;break;}return _context4.abrupt(\"return\",null);case 3:history.push({pathname:'/'});dispatch(setInitialSettings());return _context4.abrupt(\"return\",dispatch(userLoggedOut()));case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x7,_x8){return _ref7.apply(this,arguments);};}();};export var updateUserData=function updateUserData(user){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch,getState){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(!user.role||user.role.length===0)){_context5.next=2;break;}return _context5.abrupt(\"return\");case 2:jwtService.updateUserData(user).then(function(){dispatch(showMessage({message:'User data saved with api'}));}).catch(function(error){dispatch(showMessage({message:error.message}));});case 3:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x9,_x10){return _ref8.apply(this,arguments);};}();};var initialState={role:[],// guest\ndata:{displayName:'John Doe',photoURL:'assets/images/avatars/brian-hughes.jpg',email:'johndoe@withinpixels.com',shortcuts:['apps.calendar','apps.mailbox','apps.contacts','apps.tasks']}};var userSlice=createSlice({name:'user',initialState:initialState,reducers:{userLoggedOut:function userLoggedOut(state,action){return initialState;}},extraReducers:(_extraReducers={},_defineProperty(_extraReducers,updateUserSettings.fulfilled,function(state,action){return action.payload;}),_defineProperty(_extraReducers,updateUserShortcuts.fulfilled,function(state,action){return action.payload;}),_defineProperty(_extraReducers,setUser.fulfilled,function(state,action){return action.payload;}),_extraReducers)});var userLoggedOut=userSlice.actions.userLoggedOut;export{userLoggedOut};export var selectUser=function selectUser(_ref9){var user=_ref9.user;return user;};export var selectUserShortcuts=function selectUserShortcuts(_ref10){var user=_ref10.user;return user.data.shortcuts;};export default userSlice.reducer;","map":null,"metadata":{},"sourceType":"module"}