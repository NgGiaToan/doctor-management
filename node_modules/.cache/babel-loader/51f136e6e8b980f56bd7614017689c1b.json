{"ast":null,"code":"import _toConsumableArray from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Controller,useForm}from'react-hook-form';import _ from'@lodash';import IconButton from'@mui/material/IconButton';import LinearProgress from'@mui/material/LinearProgress';import List from'@mui/material/List';import ListItemIcon from'@mui/material/ListItemIcon';import ListItemText from'@mui/material/ListItemText';import Menu from'@mui/material/Menu';import MenuItem from'@mui/material/MenuItem';import Typography from'@mui/material/Typography';import{useEffect,useRef,useState}from'react';import FuseSvgIcon from'@fuse/core/FuseSvgIcon';import CardAddChecklistItem from'./CardAddChecklistItem';import CardChecklistItem from'./CardChecklistItem';import CardChecklistName from'./CardChecklistName';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function CardChecklist(props){var onCheckListChange=props.onCheckListChange,checklist=props.checklist,index=props.index;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),anchorEl=_useState2[0],setAnchorEl=_useState2[1];var checkListNameRef=useRef();var _useForm=useForm({mode:'onChange',defaultValues:checklist}),watch=_useForm.watch,control=_useForm.control;var form=watch();useEffect(function(){if(!_.isEqual(form,checklist)){onCheckListChange(form,index);}},[form,index,onCheckListChange,checklist]);function handleOpenNameForm(ev){handleMenuClose();checkListNameRef.current.openForm(ev);}function handleMenuOpen(event){setAnchorEl(event.currentTarget);}function handleMenuClose(){setAnchorEl(null);}function checkItemsChecked(){return _.sum(form.checkItems.map(function(x){return x.checked?1:0;}));}if(!form){return null;}return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-24\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mt-16 mb-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(FuseSvgIcon,{size:20,children:\"heroicons-outline:check-circle\"}),/*#__PURE__*/_jsx(Controller,{name:\"name\",control:control,defaultValue:\"\",render:function render(_ref){var _ref$field=_ref.field,onChange=_ref$field.onChange,value=_ref$field.value;return/*#__PURE__*/_jsx(CardChecklistName,{name:value,onNameChange:function onNameChange(val){return onChange(val);},ref:checkListNameRef});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(IconButton,{\"aria-owns\":anchorEl?'actions-menu':null,\"aria-haspopup\":\"true\",onClick:handleMenuOpen,variant:\"outlined\",size:\"small\",children:/*#__PURE__*/_jsx(FuseSvgIcon,{size:20,children:\"heroicons-outline:dots-vertical\"})}),/*#__PURE__*/_jsxs(Menu,{id:\"actions-menu\",anchorEl:anchorEl,open:Boolean(anchorEl),onClose:handleMenuClose,children:[/*#__PURE__*/_jsxs(MenuItem,{onClick:props.onRemoveCheckList,children:[/*#__PURE__*/_jsx(ListItemIcon,{className:\"min-w-40\",children:/*#__PURE__*/_jsx(FuseSvgIcon,{children:\"heroicons-outline:trash\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Remove Checklist\"})]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:handleOpenNameForm,children:[/*#__PURE__*/_jsx(ListItemIcon,{className:\"min-w-40\",children:/*#__PURE__*/_jsx(FuseSvgIcon,{children:\"heroicons-outline:pencil\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Rename Checklist\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center -mx-6\",children:[/*#__PURE__*/_jsx(Typography,{className:\"flex font-semibold mx-6\",children:\"\".concat(checkItemsChecked(),\" / \").concat(form.checkItems.length)}),/*#__PURE__*/_jsx(LinearProgress,{className:\"flex flex-1 mx-6\",variant:\"determinate\",color:\"secondary\",value:100*checkItemsChecked()/form.checkItems.length})]}),/*#__PURE__*/_jsx(Controller,{name:\"checkItems\",control:control,defaultValue:[],render:function render(_ref2){var _ref2$field=_ref2.field,onChange=_ref2$field.onChange,value=_ref2$field.value;return/*#__PURE__*/_jsxs(List,{className:\"\",children:[value.map(function(checkItem,_index){return/*#__PURE__*/_jsx(CardChecklistItem,{item:checkItem,index:_index,onListItemChange:function onListItemChange(item,itemIndex){onChange(_.setIn(value,\"[\".concat(itemIndex,\"]\"),item));},onListItemRemove:function onListItemRemove(){onChange(_.reject(value,{id:checkItem.id}));}},checkItem.id);}),/*#__PURE__*/_jsx(CardAddChecklistItem,{onListItemAdd:function onListItemAdd(item){return onChange([].concat(_toConsumableArray(value),[item]));}})]});}})]})]});}export default CardChecklist;","map":null,"metadata":{},"sourceType":"module"}