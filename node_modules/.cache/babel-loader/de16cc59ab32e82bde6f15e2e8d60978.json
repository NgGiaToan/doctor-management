{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.NoUnusedComponents = void 0;\n\nvar NoUnusedComponents = function NoUnusedComponents() {\n  var components = new Map();\n\n  function registerComponent(location, name) {\n    var _a;\n\n    components.set(location.absolutePointer, {\n      used: ((_a = components.get(location.absolutePointer)) === null || _a === void 0 ? void 0 : _a.used) || false,\n      location: location,\n      name: name\n    });\n  }\n\n  return {\n    ref: function ref(_ref2, _ref) {\n      var type = _ref.type,\n          resolve = _ref.resolve,\n          key = _ref.key,\n          location = _ref.location;\n\n      if (['Schema', 'Header', 'Parameter', 'Response', 'Example', 'RequestBody'].includes(type.name)) {\n        var resolvedRef = resolve(_ref2);\n        if (!resolvedRef.location) return;\n        components.set(resolvedRef.location.absolutePointer, {\n          used: true,\n          name: key.toString(),\n          location: location\n        });\n      }\n    },\n    DefinitionRoot: {\n      leave: function leave(_, _ref3) {\n        var report = _ref3.report;\n        components.forEach(function (usageInfo) {\n          if (!usageInfo.used) {\n            report({\n              message: \"Component: \\\"\".concat(usageInfo.name, \"\\\" is never used.\"),\n              location: usageInfo.location.key()\n            });\n          }\n        });\n      }\n    },\n    NamedSchemas: {\n      Schema: function Schema(schema, _ref4) {\n        var location = _ref4.location,\n            key = _ref4.key;\n\n        if (!schema.allOf) {\n          // FIXME: find a better way to detect possible discriminator\n          registerComponent(location, key.toString());\n        }\n      }\n    },\n    NamedParameters: {\n      Parameter: function Parameter(_parameter, _ref5) {\n        var location = _ref5.location,\n            key = _ref5.key;\n        registerComponent(location, key.toString());\n      }\n    },\n    NamedResponses: {\n      Response: function Response(_response, _ref6) {\n        var location = _ref6.location,\n            key = _ref6.key;\n        registerComponent(location, key.toString());\n      }\n    },\n    NamedExamples: {\n      Example: function Example(_example, _ref7) {\n        var location = _ref7.location,\n            key = _ref7.key;\n        registerComponent(location, key.toString());\n      }\n    },\n    NamedRequestBodies: {\n      RequestBody: function RequestBody(_requestBody, _ref8) {\n        var location = _ref8.location,\n            key = _ref8.key;\n        registerComponent(location, key.toString());\n      }\n    },\n    NamedHeaders: {\n      Header: function Header(_header, _ref9) {\n        var location = _ref9.location,\n            key = _ref9.key;\n        registerComponent(location, key.toString());\n      }\n    }\n  };\n};\n\nexports.NoUnusedComponents = NoUnusedComponents;","map":null,"metadata":{},"sourceType":"script"}