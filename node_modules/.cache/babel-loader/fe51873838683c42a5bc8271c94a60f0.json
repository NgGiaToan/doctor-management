{"ast":null,"code":"import _objectSpread from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Controller,useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import ClickAwayListener from'@mui/material/ClickAwayListener';import IconButton from'@mui/material/IconButton';import InputAdornment from'@mui/material/InputAdornment';import ListItemIcon from'@mui/material/ListItemIcon';import ListItemText from'@mui/material/ListItemText';import Menu from'@mui/material/Menu';import MenuItem from'@mui/material/MenuItem';import TextField from'@mui/material/TextField';import Typography from'@mui/material/Typography';import{useEffect,useState}from'react';import{useDispatch}from'react-redux';import*as yup from'yup';import _ from'@lodash';import{Box}from'@mui/system';import{darken}from'@mui/material/styles';import FuseSvgIcon from'@fuse/core/FuseSvgIcon';import{removeList,updateList}from'../../store/listsSlice';/**\r\n * Form Validation Schema\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var schema=yup.object().shape({title:yup.string().required('You must enter a title')});function BoardListHeader(props){var list=props.list,cardIds=props.cardIds;var dispatch=useDispatch();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),anchorEl=_useState2[0],setAnchorEl=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),formOpen=_useState4[0],setFormOpen=_useState4[1];var _useForm=useForm({mode:'onChange',defaultValues:{title:list.title},resolver:yupResolver(schema)}),control=_useForm.control,formState=_useForm.formState,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset;var isValid=formState.isValid,dirtyFields=formState.dirtyFields,errors=formState.errors;useEffect(function(){if(!formOpen){reset({title:list.title});}},[formOpen,reset,list.title]);useEffect(function(){if(formOpen&&anchorEl){setAnchorEl(null);}},[anchorEl,formOpen]);function handleMenuClick(event){setAnchorEl(event.currentTarget);}function handleMenuClose(){setAnchorEl(null);}function handleOpenForm(ev){ev.stopPropagation();setFormOpen(true);}function handleCloseForm(){setFormOpen(false);}function onSubmit(newData){dispatch(updateList({id:list.id,newData:newData}));handleCloseForm();}return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({},props.handleProps),{},{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between h-48 sm:h-56 px-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center min-w-0\",children:formOpen?/*#__PURE__*/_jsx(ClickAwayListener,{onClickAway:handleCloseForm,children:/*#__PURE__*/_jsx(\"form\",{className:\"flex w-full\",onSubmit:handleSubmit(onSubmit),children:/*#__PURE__*/_jsx(Controller,{name:\"title\",control:control,render:function render(_ref){var field=_ref.field;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{variant:\"outlined\",margin:\"none\",autoFocus:true,size:\"small\",InputProps:{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{type:\"submit\",disabled:_.isEmpty(dirtyFields)||!isValid,size:\"large\",children:/*#__PURE__*/_jsx(FuseSvgIcon,{children:\"heroicons-outline:check\"})})})}}));}})})}):/*#__PURE__*/_jsx(Typography,{className:\"text-14 font-medium cursor-pointer\",onClick:handleOpenForm,children:list.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Box,{className:\"flex items-center justify-center min-w-24 h-24 mx-4 text-sm font-semibold leading-24 rounded-full\",sx:{backgroundColor:function backgroundColor(theme){return darken(theme.palette.background.default,theme.palette.mode==='light'?0.1:0.3);},color:'text.secondary'},children:cardIds.length}),/*#__PURE__*/_jsx(IconButton,{\"aria-owns\":anchorEl?'actions-menu':null,\"aria-haspopup\":\"true\",onClick:handleMenuClick,variant:\"outlined\",size:\"small\",children:/*#__PURE__*/_jsx(FuseSvgIcon,{size:20,children:\"heroicons-outline:dots-vertical\"})}),/*#__PURE__*/_jsxs(Menu,{id:\"actions-menu\",anchorEl:anchorEl,open:Boolean(anchorEl),onClose:handleMenuClose,children:[/*#__PURE__*/_jsxs(MenuItem,{onClick:function onClick(){dispatch(removeList(list.id));},children:[/*#__PURE__*/_jsx(ListItemIcon,{className:\"min-w-40\",children:/*#__PURE__*/_jsx(FuseSvgIcon,{children:\"heroicons-outline:trash\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Remove List\"})]}),/*#__PURE__*/_jsxs(MenuItem,{onClick:handleOpenForm,children:[/*#__PURE__*/_jsx(ListItemIcon,{className:\"min-w-40\",children:/*#__PURE__*/_jsx(FuseSvgIcon,{children:\"heroicons-outline:pencil\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:\"Rename List\"})]})]})]})]})}));}export default BoardListHeader;","map":null,"metadata":{},"sourceType":"module"}