{"ast":null,"code":"import _objectSpread from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useDebounce,usePrevious}from'@fuse/hooks';import{styled}from'@mui/material/styles';import{Controller,useForm}from'react-hook-form';import themeLayoutConfigs from'app/theme-layouts/themeLayoutConfigs';import _ from'@lodash';import TextField from'@mui/material/TextField';import FormControl from'@mui/material/FormControl';import FormControlLabel from'@mui/material/FormControlLabel';import FormLabel from'@mui/material/FormLabel';import MenuItem from'@mui/material/MenuItem';import Radio from'@mui/material/Radio';import RadioGroup from'@mui/material/RadioGroup';import Select from'@mui/material/Select';import Switch from'@mui/material/Switch';import Typography from'@mui/material/Typography';import{memo,useCallback,useEffect,useMemo}from'react';import{useDispatch,useSelector}from'react-redux';import{selectFuseCurrentSettings,selectFuseThemesSettings,setDefaultSettings}from'app/store/fuse/settingsSlice';import{selectUser}from'app/store/userSlice';import PaletteSelector from'./palette-generator/PaletteSelector';import SectionPreview from'./palette-generator/SectionPreview';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Root=styled('div')(function(_ref){var theme=_ref.theme;return{'& .FuseSettings-formControl':{margin:'6px 0',width:'100%','&:last-child':{marginBottom:0}},'& .FuseSettings-group':{},'& .FuseSettings-formGroupTitle':{position:'absolute',top:-10,left:8,fontWeight:600,padding:'0 4px',backgroundColor:theme.palette.background.paper},'& .FuseSettings-formGroup':{position:'relative',border:\"1px solid \".concat(theme.palette.divider),borderRadius:2,padding:'12px 12px 0 12px',margin:'24px 0 16px 0','&:first-of-type':{marginTop:16}}};});function FuseSettings(props){var dispatch=useDispatch();var user=useSelector(selectUser);var themes=useSelector(selectFuseThemesSettings);var settings=useSelector(selectFuseCurrentSettings);var _useForm=useForm({mode:'onChange',defaultValues:settings}),reset=_useForm.reset,watch=_useForm.watch,control=_useForm.control;var form=watch();var formConfigs=themeLayoutConfigs[form.layout.style].form;var prevForm=usePrevious(form?_.merge({},form):null);var prevSettings=usePrevious(settings?_.merge({},settings):null);var formChanged=!_.isEqual(form,prevForm);var settingsChanged=!_.isEqual(settings,prevSettings);var handleUpdate=useDebounce(function(newSettings){dispatch(setDefaultSettings(newSettings));},300);useEffect(function(){// Skip inital changes\nif(!prevForm&&!prevSettings){return;}// If theme settings changed update form data\nif(settingsChanged){reset(settings);return;}var newSettings=_.merge({},settings,form);// No need to change\nif(_.isEqual(newSettings,settings)){return;}// If form changed update theme settings\nif(formChanged){if(settings.layout.style!==newSettings.layout.style){var _themeLayoutConfigs$n,_newSettings$layout;_.set(newSettings,'layout.config',(_themeLayoutConfigs$n=themeLayoutConfigs[newSettings===null||newSettings===void 0?void 0:(_newSettings$layout=newSettings.layout)===null||_newSettings$layout===void 0?void 0:_newSettings$layout.style])===null||_themeLayoutConfigs$n===void 0?void 0:_themeLayoutConfigs$n.defaults);}handleUpdate(newSettings);}},[dispatch,form,formChanged,handleUpdate,prevForm,prevSettings,reset,settings,settingsChanged,user]);var ThemeSelect=function ThemeSelect(_ref2){var value=_ref2.value,name=_ref2.name,handleThemeChange=_ref2.handleThemeChange;return/*#__PURE__*/_jsx(Select,{className:\"w-full rounded-8 h-40 overflow-hidden my-8\",value:value,onChange:handleThemeChange,name:name,variant:\"outlined\",style:{backgroundColor:themes[value].palette.background.default,color:themes[value].palette.mode==='light'?'#000000':'#ffffff'},children:Object.entries(themes).filter(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],val=_ref4[1];return!(name==='theme.main'&&(key==='mainThemeDark'||key==='mainThemeLight'));}).map(function(_ref5){var _ref6=_slicedToArray(_ref5,2),key=_ref6[0],val=_ref6[1];return/*#__PURE__*/_jsxs(MenuItem,{value:key,className:\"m-8 mt-0 rounded-lg\",style:{backgroundColor:val.palette.background.default,color:val.palette.mode==='light'?'#000000':'#FFFFFF',border:\"1px solid \".concat(val.palette.mode==='light'?'rgba(0, 0, 0, 0.12)':'rgba(255, 255, 255, 0.12)')},children:[_.startCase(key),/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full h-8 block absolute bottom-0 left-0 right-0\",style:{borderTop:\"1px solid \".concat(val.palette.mode==='light'?'rgba(0, 0, 0, 0.12)':'rgba(255, 255, 255, 0.12)')},children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-1/4 h-8\",style:{backgroundColor:val.palette.primary.main?val.palette.primary.main:val.palette.primary[500]}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/4 h-8\",style:{backgroundColor:val.palette.secondary.main?val.palette.secondary.main:val.palette.secondary[500]}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/4 h-8\",style:{backgroundColor:val.palette.error.main?val.palette.error.main:val.palette.error[500]}}),/*#__PURE__*/_jsx(\"div\",{className:\"w-1/4 h-8\",style:{backgroundColor:val.palette.background.paper}})]})]},key);})});};var getForm=useCallback(function(_formConfigs,prefix){return Object.entries(_formConfigs).map(function(_ref7){var _ref8=_slicedToArray(_ref7,2),key=_ref8[0],formControl=_ref8[1];var target=prefix?\"\".concat(prefix,\".\").concat(key):key;switch(formControl.type){case'radio':{return/*#__PURE__*/_jsx(Controller,{name:target,control:control,render:function render(_ref9){var field=_ref9.field;return/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",className:\"FuseSettings-formControl\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",className:\"text-14\",children:formControl.title}),/*#__PURE__*/_jsx(RadioGroup,_objectSpread(_objectSpread({},field),{},{\"aria-label\":formControl.title,className:\"FuseSettings-group\",row:formControl.options.length<4,children:formControl.options.map(function(opt){return/*#__PURE__*/_jsx(FormControlLabel,{value:opt.value,control:/*#__PURE__*/_jsx(Radio,{}),label:opt.name},opt.value);})}))]});}},target);}case'switch':{return/*#__PURE__*/_jsx(Controller,{name:target,control:control,render:function render(_ref10){var _ref10$field=_ref10.field,_onChange=_ref10$field.onChange,value=_ref10$field.value;return/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",className:\"FuseSettings-formControl\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",className:\"text-14\",children:formControl.title}),/*#__PURE__*/_jsx(Switch,{checked:value,onChange:function onChange(ev){return _onChange(ev.target.checked);},\"aria-label\":formControl.title})]});}},target);}case'number':{return/*#__PURE__*/_jsx(\"div\",{className:\"FuseSettings-formControl\",children:/*#__PURE__*/_jsx(Controller,{name:target,control:control,render:function render(_ref11){var field=_ref11.field;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{label:formControl.title,type:\"number\",InputLabelProps:{shrink:true},variant:\"outlined\"}));}})},target);}case'group':{return/*#__PURE__*/_jsxs(\"div\",{className:\"FuseSettings-formGroup\",children:[/*#__PURE__*/_jsx(Typography,{className:\"FuseSettings-formGroupTitle\",color:\"text.secondary\",children:formControl.title}),getForm(formControl.children,target)]},target);}default:{return'';}}});},[control]);return/*#__PURE__*/_jsxs(Root,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"FuseSettings-formGroup\",children:[/*#__PURE__*/_jsx(Typography,{className:\"FuseSettings-formGroupTitle\",color:\"text.secondary\",children:\"Layout\"}),/*#__PURE__*/_jsx(Controller,{name:\"layout.style\",control:control,render:function render(_ref12){var field=_ref12.field;return/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",className:\"FuseSettings-formControl\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",className:\"text-14\",children:\"Style\"}),/*#__PURE__*/_jsx(RadioGroup,_objectSpread(_objectSpread({},field),{},{\"aria-label\":\"Layout Style\",className:\"FuseSettings-group\",children:Object.entries(themeLayoutConfigs).map(function(_ref13){var _ref14=_slicedToArray(_ref13,2),key=_ref14[0],layout=_ref14[1];return/*#__PURE__*/_jsx(FormControlLabel,{value:key,control:/*#__PURE__*/_jsx(Radio,{}),label:layout.title},key);})}))]});}}),useMemo(function(){return getForm(formConfigs,'layout.config');},[formConfigs,getForm]),/*#__PURE__*/_jsx(Typography,{className:\"my-16 text-12 italic\",color:\"text.secondary\",children:\"*Not all option combinations are available\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"FuseSettings-formGroup pb-16\",children:[/*#__PURE__*/_jsx(Typography,{className:\"FuseSettings-formGroupTitle\",color:\"text.secondary\",children:\"Theme\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap -mx-8\",children:[/*#__PURE__*/_jsx(Controller,{name:\"theme.main\",control:control,render:function render(_ref15){var _ref15$field=_ref15.field,value=_ref15$field.value,onChange=_ref15$field.onChange;return/*#__PURE__*/_jsx(PaletteSelector,{value:value,onChange:onChange,trigger:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center space-y-8 w-128 m-8 cursor-pointer group\",children:[/*#__PURE__*/_jsx(SectionPreview,{className:\"group-hover:shadow-lg transition-shadow\",section:\"main\"}),/*#__PURE__*/_jsx(Typography,{className:\"flex-1 text-14 font-semibold mb-24 opacity-80 group-hover:opacity-100\",children:\"Main Palette\"})]})});}}),/*#__PURE__*/_jsx(Controller,{name:\"theme.navbar\",control:control,render:function render(_ref16){var _ref16$field=_ref16.field,value=_ref16$field.value,onChange=_ref16$field.onChange;return/*#__PURE__*/_jsx(PaletteSelector,{value:value,onChange:onChange,trigger:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center space-y-8 w-128 m-8 cursor-pointer group\",children:[/*#__PURE__*/_jsx(SectionPreview,{className:\"group-hover:shadow-lg transition-shadow\",section:\"navbar\"}),/*#__PURE__*/_jsx(Typography,{className:\"flex-1 text-14 font-semibold mb-24 opacity-80 group-hover:opacity-100\",children:\"Navbar Palette\"})]})});}}),/*#__PURE__*/_jsx(Controller,{name:\"theme.toolbar\",control:control,render:function render(_ref17){var _ref17$field=_ref17.field,value=_ref17$field.value,onChange=_ref17$field.onChange;return/*#__PURE__*/_jsx(PaletteSelector,{value:value,onChange:onChange,trigger:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center space-y-8 w-128 m-8 cursor-pointer group\",children:[/*#__PURE__*/_jsx(SectionPreview,{className:\"group-hover:shadow-lg transition-shadow\",section:\"toolbar\"}),/*#__PURE__*/_jsx(Typography,{className:\"flex-1 text-14 font-semibold mb-24 opacity-80 group-hover:opacity-100\",children:\"Toolbar Palette\"})]})});}}),/*#__PURE__*/_jsx(Controller,{name:\"theme.footer\",control:control,render:function render(_ref18){var _ref18$field=_ref18.field,value=_ref18$field.value,onChange=_ref18$field.onChange;return/*#__PURE__*/_jsx(PaletteSelector,{value:value,onChange:onChange,trigger:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center space-y-8 w-128 m-8 cursor-pointer group\",children:[/*#__PURE__*/_jsx(SectionPreview,{className:\"group-hover:shadow-lg transition-shadow\",section:\"footer\"}),/*#__PURE__*/_jsx(Typography,{className:\"flex-1 text-14 font-semibold mb-24 opacity-80 group-hover:opacity-100\",children:\"Footer Palette\"})]})});}})]})]}),/*#__PURE__*/_jsx(Controller,{name:\"customScrollbars\",control:control,render:function render(_ref19){var _ref19$field=_ref19.field,_onChange2=_ref19$field.onChange,value=_ref19$field.value;return/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",className:\"FuseSettings-formControl\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",className:\"text-14\",children:\"Custom Scrollbars\"}),/*#__PURE__*/_jsx(Switch,{checked:value,onChange:function onChange(ev){return _onChange2(ev.target.checked);},\"aria-label\":\"Custom Scrollbars\"})]});}}),/*#__PURE__*/_jsx(Controller,{name:\"direction\",control:control,render:function render(_ref20){var field=_ref20.field;return/*#__PURE__*/_jsxs(FormControl,{component:\"fieldset\",className:\"FuseSettings-formControl\",children:[/*#__PURE__*/_jsx(FormLabel,{component:\"legend\",className:\"text-14\",children:\"Direction\"}),/*#__PURE__*/_jsxs(RadioGroup,_objectSpread(_objectSpread({},field),{},{\"aria-label\":\"Layout Direction\",className:\"FuseSettings-group\",row:true,children:[/*#__PURE__*/_jsx(FormControlLabel,{value:\"rtl\",control:/*#__PURE__*/_jsx(Radio,{}),label:\"RTL\"},\"rtl\"),/*#__PURE__*/_jsx(FormControlLabel,{value:\"ltr\",control:/*#__PURE__*/_jsx(Radio,{}),label:\"LTR\"},\"ltr\")]}))]});}})]});}export default/*#__PURE__*/memo(FuseSettings);","map":null,"metadata":{},"sourceType":"module"}