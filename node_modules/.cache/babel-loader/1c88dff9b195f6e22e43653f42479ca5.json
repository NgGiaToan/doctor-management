{"ast":null,"code":"import _slicedToArray from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{styled,useTheme}from'@mui/material/styles';import Typography from'@mui/material/Typography';import withReducer from'app/store/withReducer';import{useEffect,useRef,useState}from'react';import{useDispatch,useSelector}from'react-redux';import FullCalendar from'@fullcalendar/react';import dayGridPlugin from'@fullcalendar/daygrid';import timeGridPlugin from'@fullcalendar/timegrid';import interactionPlugin from'@fullcalendar/interaction';import FusePageSimple from'@fuse/core/FusePageSimple';import _ from'@lodash';import clsx from'clsx';import{Box}from'@mui/system';import useThemeMediaQuery from'@fuse/hooks/useThemeMediaQuery';import CalendarHeader from'./CalendarHeader';import EventDialog from'./dialogs/event/EventDialog';import reducer from'./store';import{getEvents,openEditEventDialog,openNewEventDialog,selectFilteredEvents,updateEvent}from'./store/eventsSlice';import{getLabels,selectLabels}from'./store/labelsSlice';import LabelsDialog from'./dialogs/labels/LabelsDialog';import CalendarAppSidebar from'./CalendarAppSidebar';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Root=styled(FusePageSimple)(function(_ref){var theme=_ref.theme;return{'& a':{color:\"\".concat(theme.palette.text.primary,\"!important\"),textDecoration:'none!important'},'&  .fc-media-screen':{minHeight:'100%',width:'100%'},'& .fc-scrollgrid, & .fc-theme-standard td, & .fc-theme-standard th':{borderColor:\"\".concat(theme.palette.divider,\"!important\")},'&  .fc-scrollgrid-section > td':{border:0},'& .fc-daygrid-day':{'&:last-child':{borderRight:0}},'& .fc-col-header-cell':{borderWidth:'0 1px 0 1px',padding:'8px 0 0 0','& .fc-col-header-cell-cushion':{color:theme.palette.text.secondary,fontWeight:500,fontSize:12,textTransform:'uppercase'}},'& .fc-view ':{'& > .fc-scrollgrid':{border:0}},'& .fc-daygrid-day.fc-day-today':{backgroundColor:'transparent!important','& .fc-daygrid-day-number':{borderRadius:'100%',backgroundColor:\"\".concat(theme.palette.secondary.main,\"!important\"),color:\"\".concat(theme.palette.secondary.contrastText,\"!important\")}},'& .fc-daygrid-day-top':{justifyContent:'center','& .fc-daygrid-day-number':{color:theme.palette.text.secondary,fontWeight:500,fontSize:12,display:'inline-flex',alignItems:'center',justifyContent:'center',width:26,height:26,margin:'4px 0',borderRadius:'50%',float:'none',lineHeight:1}},'& .fc-h-event':{background:'initial'},'& .fc-event':{border:0,padding:'0 ',fontSize:12,margin:'0 6px 4px 6px!important'}};});function CalendarApp(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentDate=_useState2[0],setCurrentDate=_useState2[1];var dispatch=useDispatch();var events=useSelector(selectFilteredEvents);var calendarRef=useRef();var isMobile=useThemeMediaQuery(function(theme){return theme.breakpoints.down('lg');});var _useState3=useState(!isMobile),_useState4=_slicedToArray(_useState3,2),leftSidebarOpen=_useState4[0],setLeftSidebarOpen=_useState4[1];var theme=useTheme();var labels=useSelector(selectLabels);useEffect(function(){dispatch(getEvents());dispatch(getLabels());},[dispatch]);useEffect(function(){setLeftSidebarOpen(!isMobile);},[isMobile]);useEffect(function(){// Correct calendar dimentions after sidebar toggles\nsetTimeout(function(){var _calendarRef$current,_calendarRef$current$;(_calendarRef$current=calendarRef.current)===null||_calendarRef$current===void 0?void 0:(_calendarRef$current$=_calendarRef$current.getApi())===null||_calendarRef$current$===void 0?void 0:_calendarRef$current$.updateSize();},300);},[leftSidebarOpen]);var handleDateSelect=function handleDateSelect(selectInfo){var start=selectInfo.start,end=selectInfo.end;dispatch(openNewEventDialog(selectInfo));};var handleEventDrop=function handleEventDrop(eventDropInfo){var _eventDropInfo$event=eventDropInfo.event,id=_eventDropInfo$event.id,title=_eventDropInfo$event.title,allDay=_eventDropInfo$event.allDay,start=_eventDropInfo$event.start,end=_eventDropInfo$event.end,extendedProps=_eventDropInfo$event.extendedProps;dispatch(updateEvent({id:id,title:title,allDay:allDay,start:start,end:end,extendedProps:extendedProps}));};var handleEventClick=function handleEventClick(clickInfo){dispatch(openEditEventDialog(clickInfo));};function renderEventContent(eventInfo){var labelId=eventInfo.event.extendedProps.label;var label=_.find(labels,{id:labelId});return/*#__PURE__*/_jsxs(Box,{sx:{backgroundColor:label===null||label===void 0?void 0:label.color,color:label&&theme.palette.getContrastText(label===null||label===void 0?void 0:label.color)},className:clsx('flex items-center w-full rounded-4 px-8 py-2 h-22 text-white'),children:[/*#__PURE__*/_jsx(Typography,{className:\"text-12 font-semibold\",children:eventInfo.timeText}),/*#__PURE__*/_jsx(Typography,{className:\"text-12 px-4 truncate\",children:eventInfo.event.title})]});}var handleDates=function handleDates(rangeInfo){setCurrentDate(rangeInfo);};var handleEventAdd=function handleEventAdd(addInfo){};var handleEventChange=function handleEventChange(changeInfo){};var handleEventRemove=function handleEventRemove(removeInfo){};function handleToggleLeftSidebar(){setLeftSidebarOpen(!leftSidebarOpen);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Root,{header:/*#__PURE__*/_jsx(CalendarHeader,{calendarRef:calendarRef,currentDate:currentDate,onToggleLeftSidebar:handleToggleLeftSidebar}),content:/*#__PURE__*/_jsx(FullCalendar,{plugins:[dayGridPlugin,timeGridPlugin,interactionPlugin],headerToolbar:false,initialView:\"dayGridMonth\",editable:true,selectable:true,selectMirror:true,dayMaxEvents:true,weekends:true,datesSet:handleDates,select:handleDateSelect,events:events,eventContent:renderEventContent,eventClick:handleEventClick,eventAdd:handleEventAdd,eventChange:handleEventChange,eventRemove:handleEventRemove,eventDrop:handleEventDrop,initialDate:new Date(2022,3,1),ref:calendarRef}),leftSidebarContent:/*#__PURE__*/_jsx(CalendarAppSidebar,{}),leftSidebarOpen:leftSidebarOpen,leftSidebarOnClose:function leftSidebarOnClose(){return setLeftSidebarOpen(false);},leftSidebarWidth:240,scroll:\"content\"}),/*#__PURE__*/_jsx(EventDialog,{}),/*#__PURE__*/_jsx(LabelsDialog,{})]});}export default withReducer('calendarApp',reducer)(CalendarApp);","map":null,"metadata":{},"sourceType":"module"}