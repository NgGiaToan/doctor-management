{"ast":null,"code":"import _objectSpread from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{yupResolver}from'@hookform/resolvers/yup';import{Controller,useForm}from'react-hook-form';import TextField from'@mui/material/TextField';import Input from'@mui/material/Input';import IconButton from'@mui/material/IconButton';import InputAdornment from'@mui/material/InputAdornment';import ListItem from'@mui/material/ListItem';import clsx from'clsx';import{useDispatch}from'react-redux';import*as yup from'yup';import FuseSvgIcon from'@fuse/core/FuseSvgIcon';import{useEffect}from'react';import{useDebounce}from'@fuse/hooks';import _ from'@lodash';import FormLabel from'@mui/material/FormLabel';import{closeDialog,openDialog}from'app/store/fuse/dialogSlice';import DialogTitle from'@mui/material/DialogTitle';import DialogContent from'@mui/material/DialogContent';import DialogContentText from'@mui/material/DialogContentText';import DialogActions from'@mui/material/DialogActions';import Button from'@mui/material/Button';import{removeLabel,updateLabel}from'../../store/labelsSlice';import{getEvents}from'../../store/eventsSlice';/**\r\n * Form Validation Schema\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var schema=yup.object().shape({title:yup.string().required('You must enter a label title')});function NewLabelForm(props){var label=props.label,isLast=props.isLast;var dispatch=useDispatch();var _useForm=useForm({mode:'onChange',defaultValues:label,resolver:yupResolver(schema)}),control=_useForm.control,formState=_useForm.formState,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset,watch=_useForm.watch;var isValid=formState.isValid,dirtyFields=formState.dirtyFields,errors=formState.errors;var form=watch();useEffect(function(){reset(label);},[label,reset]);var handleOnChange=useDebounce(function(_label,_form){if(!_label){return;}if(form&&!_.isEqual(_form,_label)){dispatch(updateLabel(_form));}},300);useEffect(function(){handleOnChange(label,form);},[handleOnChange,label,form]);function handleOnRemove(){dispatch(openDialog({children:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(DialogTitle,{id:\"alert-dialog-title\",children:\"Are you sure?\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsx(DialogContentText,{id:\"alert-dialog-description\",children:\"All associated events will be removed.\"})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return dispatch(closeDialog());},color:\"primary\",children:\"Disagree\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){dispatch(removeLabel(label.id)).then(function(){dispatch(getEvents());});dispatch(closeDialog());},color:\"primary\",autoFocus:true,children:\"Agree\"})]})]})}));}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(ListItem,{className:\"p-0 mb-16\",dense:true,children:/*#__PURE__*/_jsx(Controller,{name:\"title\",control:control,render:function render(_ref){var _errors$title;var field=_ref.field;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{className:clsx('flex flex-1'),error:!!errors.title,helperText:errors===null||errors===void 0?void 0:(_errors$title=errors.title)===null||_errors$title===void 0?void 0:_errors$title.message,placeholder:\"Create new label\",variant:\"outlined\",InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:/*#__PURE__*/_jsx(Controller,{name:\"color\",control:control,render:function render(_ref2){var _ref2$field=_ref2.field,_onChange=_ref2$field.onChange,_value=_ref2$field.value;return/*#__PURE__*/_jsx(FormLabel,{className:\"w-16 h-16 shrink-0 rounded-full\",sx:{backgroundColor:_value},children:/*#__PURE__*/_jsx(Input,{value:_value,onChange:function onChange(ev){_onChange(ev.target.value);},type:\"color\",className:\"opacity-0\"})});}})}),endAdornment:!isLast&&/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{onClick:handleOnRemove,className:\"w-32 h-32 p-0\",\"aria-label\":\"Delete\",size:\"large\",children:/*#__PURE__*/_jsx(FuseSvgIcon,{color:\"action\",size:20,children:\"heroicons-outline:trash\"})})})}}));}})})});}export default NewLabelForm;","map":null,"metadata":{},"sourceType":"module"}