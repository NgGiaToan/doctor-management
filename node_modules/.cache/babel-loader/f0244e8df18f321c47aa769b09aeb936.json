{"ast":null,"code":"import { createEntityAdapter, createSelector, createSlice } from '@reduxjs/toolkit';\nimport navigationConfig from 'app/configs/navigationConfig';\nimport FuseUtils from '@fuse/utils';\nimport i18next from 'i18next';\nimport _ from '@lodash';\nconst navigationAdapter = createEntityAdapter();\nconst emptyInitialState = navigationAdapter.getInitialState();\nconst initialState = navigationAdapter.upsertMany(emptyInitialState, navigationConfig);\nexport const appendNavigationItem = (item, parentId) => (dispatch, getState) => {\n  const navigation = selectNavigationAll(getState());\n  return dispatch(setNavigation(FuseUtils.appendNavItem(navigation, item, parentId)));\n};\nexport const prependNavigationItem = (item, parentId) => (dispatch, getState) => {\n  const navigation = selectNavigationAll(getState());\n  return dispatch(setNavigation(FuseUtils.prependNavItem(navigation, item, parentId)));\n};\nexport const updateNavigationItem = (id, item) => (dispatch, getState) => {\n  const navigation = selectNavigationAll(getState());\n  return dispatch(setNavigation(FuseUtils.updateNavItem(navigation, id, item)));\n};\nexport const removeNavigationItem = id => (dispatch, getState) => {\n  const navigation = selectNavigationAll(getState());\n  return dispatch(setNavigation(FuseUtils.removeNavItem(navigation, id)));\n};\nexport const {\n  selectAll: selectNavigationAll,\n  selectIds: selectNavigationIds,\n  selectById: selectNavigationItemById\n} = navigationAdapter.getSelectors(state => state.fuse.navigation);\nconst navigationSlice = createSlice({\n  name: 'navigation',\n  initialState,\n  reducers: {\n    setNavigation: navigationAdapter.setAll,\n    resetNavigation: (state, action) => initialState\n  }\n});\nexport const {\n  setNavigation,\n  resetNavigation\n} = navigationSlice.actions;\n\nconst getUserRole = state => state.user.role;\n\nexport const selectNavigation = createSelector([selectNavigationAll, _ref => {\n  let {\n    i18n\n  } = _ref;\n  return i18n.language;\n}, getUserRole], (navigation, language, userRole) => {\n  function setTranslationValues(data) {\n    // loop through every object in the array\n    return data.map(item => {\n      if (item.translate && item.title) {\n        item.title = i18next.t(`navigation:${item.translate}`);\n      } // see if there is a children node\n\n\n      if (item.children) {\n        // run this function recursively on the children array\n        item.children = setTranslationValues(item.children);\n      }\n\n      return item;\n    });\n  }\n\n  return setTranslationValues(_.merge([], filterRecursively(navigation, item => FuseUtils.hasPermission(item.auth, userRole))));\n});\n\nfunction filterRecursively(arr, predicate) {\n  return arr.filter(predicate).map(item => {\n    item = { ...item\n    };\n\n    if (item.children) {\n      item.children = filterRecursively(item.children, predicate);\n    }\n\n    return item;\n  });\n}\n\nexport const selectFlatNavigation = createSelector([selectNavigation], navigation => FuseUtils.getFlatNavigation(navigation));\nexport default navigationSlice.reducer;","map":{"version":3,"names":["createEntityAdapter","createSelector","createSlice","navigationConfig","FuseUtils","i18next","_","navigationAdapter","emptyInitialState","getInitialState","initialState","upsertMany","appendNavigationItem","item","parentId","dispatch","getState","navigation","selectNavigationAll","setNavigation","appendNavItem","prependNavigationItem","prependNavItem","updateNavigationItem","id","updateNavItem","removeNavigationItem","removeNavItem","selectAll","selectIds","selectNavigationIds","selectById","selectNavigationItemById","getSelectors","state","fuse","navigationSlice","name","reducers","setAll","resetNavigation","action","actions","getUserRole","user","role","selectNavigation","i18n","language","userRole","setTranslationValues","data","map","translate","title","t","children","merge","filterRecursively","hasPermission","auth","arr","predicate","filter","selectFlatNavigation","getFlatNavigation","reducer"],"sources":["C:/Users/giato/Downloads/Workspace/.Net/ui/doctor-management-fe/src/app/store/fuse/navigationSlice.js"],"sourcesContent":["import { createEntityAdapter, createSelector, createSlice } from '@reduxjs/toolkit';\r\nimport navigationConfig from 'app/configs/navigationConfig';\r\nimport FuseUtils from '@fuse/utils';\r\nimport i18next from 'i18next';\r\nimport _ from '@lodash';\r\n\r\nconst navigationAdapter = createEntityAdapter();\r\nconst emptyInitialState = navigationAdapter.getInitialState();\r\nconst initialState = navigationAdapter.upsertMany(emptyInitialState, navigationConfig);\r\n\r\nexport const appendNavigationItem = (item, parentId) => (dispatch, getState) => {\r\n  const navigation = selectNavigationAll(getState());\r\n\r\n  return dispatch(setNavigation(FuseUtils.appendNavItem(navigation, item, parentId)));\r\n};\r\n\r\nexport const prependNavigationItem = (item, parentId) => (dispatch, getState) => {\r\n  const navigation = selectNavigationAll(getState());\r\n\r\n  return dispatch(setNavigation(FuseUtils.prependNavItem(navigation, item, parentId)));\r\n};\r\n\r\nexport const updateNavigationItem = (id, item) => (dispatch, getState) => {\r\n  const navigation = selectNavigationAll(getState());\r\n\r\n  return dispatch(setNavigation(FuseUtils.updateNavItem(navigation, id, item)));\r\n};\r\n\r\nexport const removeNavigationItem = (id) => (dispatch, getState) => {\r\n  const navigation = selectNavigationAll(getState());\r\n\r\n  return dispatch(setNavigation(FuseUtils.removeNavItem(navigation, id)));\r\n};\r\n\r\nexport const {\r\n  selectAll: selectNavigationAll,\r\n  selectIds: selectNavigationIds,\r\n  selectById: selectNavigationItemById,\r\n} = navigationAdapter.getSelectors((state) => state.fuse.navigation);\r\n\r\nconst navigationSlice = createSlice({\r\n  name: 'navigation',\r\n  initialState,\r\n  reducers: {\r\n    setNavigation: navigationAdapter.setAll,\r\n    resetNavigation: (state, action) => initialState,\r\n  },\r\n});\r\n\r\nexport const { setNavigation, resetNavigation } = navigationSlice.actions;\r\n\r\nconst getUserRole = (state) => state.user.role;\r\n\r\nexport const selectNavigation = createSelector(\r\n  [selectNavigationAll, ({ i18n }) => i18n.language, getUserRole],\r\n  (navigation, language, userRole) => {\r\n    function setTranslationValues(data) {\r\n      // loop through every object in the array\r\n      return data.map((item) => {\r\n        if (item.translate && item.title) {\r\n          item.title = i18next.t(`navigation:${item.translate}`);\r\n        }\r\n\r\n        // see if there is a children node\r\n        if (item.children) {\r\n          // run this function recursively on the children array\r\n          item.children = setTranslationValues(item.children);\r\n        }\r\n        return item;\r\n      });\r\n    }\r\n\r\n    return setTranslationValues(\r\n      _.merge(\r\n        [],\r\n        filterRecursively(navigation, (item) => FuseUtils.hasPermission(item.auth, userRole))\r\n      )\r\n    );\r\n  }\r\n);\r\n\r\nfunction filterRecursively(arr, predicate) {\r\n  return arr.filter(predicate).map((item) => {\r\n    item = { ...item };\r\n    if (item.children) {\r\n      item.children = filterRecursively(item.children, predicate);\r\n    }\r\n    return item;\r\n  });\r\n}\r\n\r\nexport const selectFlatNavigation = createSelector([selectNavigation], (navigation) =>\r\n  FuseUtils.getFlatNavigation(navigation)\r\n);\r\n\r\nexport default navigationSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}