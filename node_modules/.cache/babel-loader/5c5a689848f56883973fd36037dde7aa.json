{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validateJsonSchema = exports.releaseAjvInstance = void 0;\n\nconst ajv_1 = require(\"@redocly/ajv\");\n\nconst ref_utils_1 = require(\"../ref-utils\");\n\nlet ajvInstance = null;\n\nfunction releaseAjvInstance() {\n  ajvInstance = null;\n}\n\nexports.releaseAjvInstance = releaseAjvInstance;\n\nfunction getAjv(resolve, disallowAdditionalProperties) {\n  if (!ajvInstance) {\n    ajvInstance = new ajv_1.default({\n      schemaId: '$id',\n      meta: true,\n      allErrors: true,\n      strictSchema: false,\n      inlineRefs: false,\n      validateSchema: false,\n      discriminator: true,\n      allowUnionTypes: true,\n      validateFormats: false,\n      defaultAdditionalProperties: !disallowAdditionalProperties,\n\n      loadSchemaSync(base, $ref) {\n        const resolvedRef = resolve({\n          $ref\n        }, base.split('#')[0]);\n        if (!resolvedRef || !resolvedRef.location) return undefined;\n        return Object.assign({\n          $id: resolvedRef.location.absolutePointer\n        }, resolvedRef.node);\n      },\n\n      logger: false\n    });\n  }\n\n  return ajvInstance;\n}\n\nfunction getAjvValidator(schema, loc, resolve, disallowAdditionalProperties) {\n  const ajv = getAjv(resolve, disallowAdditionalProperties);\n\n  if (!ajv.getSchema(loc.absolutePointer)) {\n    ajv.addSchema(Object.assign({\n      $id: loc.absolutePointer\n    }, schema), loc.absolutePointer);\n  }\n\n  return ajv.getSchema(loc.absolutePointer);\n}\n\nfunction validateJsonSchema(data, schema, schemaLoc, instancePath, resolve, disallowAdditionalProperties) {\n  const validate = getAjvValidator(schema, schemaLoc, resolve, disallowAdditionalProperties);\n  if (!validate) return {\n    valid: true,\n    errors: []\n  }; // unresolved refs are reported\n\n  const valid = validate(data, {\n    instancePath,\n    parentData: {\n      fake: {}\n    },\n    parentDataProperty: 'fake',\n    rootData: {},\n    dynamicAnchors: {}\n  });\n  return {\n    valid: !!valid,\n    errors: (validate.errors || []).map(beatifyErrorMessage)\n  };\n\n  function beatifyErrorMessage(error) {\n    let message = error.message;\n    let suggest = error.keyword === 'enum' ? error.params.allowedValues : undefined;\n\n    if (suggest) {\n      message += ` ${suggest.map(e => `\"${e}\"`).join(', ')}`;\n    }\n\n    if (error.keyword === 'type') {\n      message = `type ${message}`;\n    }\n\n    const relativePath = error.instancePath.substring(instancePath.length + 1);\n    const propName = relativePath.substring(relativePath.lastIndexOf('/') + 1);\n\n    if (propName) {\n      message = `\\`${propName}\\` property ${message}`;\n    }\n\n    if (error.keyword === 'additionalProperties') {\n      const property = error.params.additionalProperty;\n      message = `${message} \\`${property}\\``;\n      error.instancePath += '/' + ref_utils_1.escapePointer(property);\n    }\n\n    return Object.assign(Object.assign({}, error), {\n      message,\n      suggest\n    });\n  }\n}\n\nexports.validateJsonSchema = validateJsonSchema;","map":{"version":3,"names":["Object","defineProperty","exports","value","validateJsonSchema","releaseAjvInstance","ajv_1","require","ref_utils_1","ajvInstance","getAjv","resolve","disallowAdditionalProperties","default","schemaId","meta","allErrors","strictSchema","inlineRefs","validateSchema","discriminator","allowUnionTypes","validateFormats","defaultAdditionalProperties","loadSchemaSync","base","$ref","resolvedRef","split","location","undefined","assign","$id","absolutePointer","node","logger","getAjvValidator","schema","loc","ajv","getSchema","addSchema","data","schemaLoc","instancePath","validate","valid","errors","parentData","fake","parentDataProperty","rootData","dynamicAnchors","map","beatifyErrorMessage","error","message","suggest","keyword","params","allowedValues","e","join","relativePath","substring","length","propName","lastIndexOf","property","additionalProperty","escapePointer"],"sources":["C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@redocly/openapi-core/lib/rules/ajv.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateJsonSchema = exports.releaseAjvInstance = void 0;\nconst ajv_1 = require(\"@redocly/ajv\");\nconst ref_utils_1 = require(\"../ref-utils\");\nlet ajvInstance = null;\nfunction releaseAjvInstance() {\n    ajvInstance = null;\n}\nexports.releaseAjvInstance = releaseAjvInstance;\nfunction getAjv(resolve, disallowAdditionalProperties) {\n    if (!ajvInstance) {\n        ajvInstance = new ajv_1.default({\n            schemaId: '$id',\n            meta: true,\n            allErrors: true,\n            strictSchema: false,\n            inlineRefs: false,\n            validateSchema: false,\n            discriminator: true,\n            allowUnionTypes: true,\n            validateFormats: false,\n            defaultAdditionalProperties: !disallowAdditionalProperties,\n            loadSchemaSync(base, $ref) {\n                const resolvedRef = resolve({ $ref }, base.split('#')[0]);\n                if (!resolvedRef || !resolvedRef.location)\n                    return undefined;\n                return Object.assign({ $id: resolvedRef.location.absolutePointer }, resolvedRef.node);\n            },\n            logger: false,\n        });\n    }\n    return ajvInstance;\n}\nfunction getAjvValidator(schema, loc, resolve, disallowAdditionalProperties) {\n    const ajv = getAjv(resolve, disallowAdditionalProperties);\n    if (!ajv.getSchema(loc.absolutePointer)) {\n        ajv.addSchema(Object.assign({ $id: loc.absolutePointer }, schema), loc.absolutePointer);\n    }\n    return ajv.getSchema(loc.absolutePointer);\n}\nfunction validateJsonSchema(data, schema, schemaLoc, instancePath, resolve, disallowAdditionalProperties) {\n    const validate = getAjvValidator(schema, schemaLoc, resolve, disallowAdditionalProperties);\n    if (!validate)\n        return { valid: true, errors: [] }; // unresolved refs are reported\n    const valid = validate(data, {\n        instancePath,\n        parentData: { fake: {} },\n        parentDataProperty: 'fake',\n        rootData: {},\n        dynamicAnchors: {},\n    });\n    return {\n        valid: !!valid,\n        errors: (validate.errors || []).map(beatifyErrorMessage),\n    };\n    function beatifyErrorMessage(error) {\n        let message = error.message;\n        let suggest = error.keyword === 'enum' ? error.params.allowedValues : undefined;\n        if (suggest) {\n            message += ` ${suggest.map((e) => `\"${e}\"`).join(', ')}`;\n        }\n        if (error.keyword === 'type') {\n            message = `type ${message}`;\n        }\n        const relativePath = error.instancePath.substring(instancePath.length + 1);\n        const propName = relativePath.substring(relativePath.lastIndexOf('/') + 1);\n        if (propName) {\n            message = `\\`${propName}\\` property ${message}`;\n        }\n        if (error.keyword === 'additionalProperties') {\n            const property = error.params.additionalProperty;\n            message = `${message} \\`${property}\\``;\n            error.instancePath += '/' + ref_utils_1.escapePointer(property);\n        }\n        return Object.assign(Object.assign({}, error), { message,\n            suggest });\n    }\n}\nexports.validateJsonSchema = validateJsonSchema;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}