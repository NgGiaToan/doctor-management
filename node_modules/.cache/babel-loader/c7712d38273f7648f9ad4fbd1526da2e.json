{"ast":null,"code":"import _objectSpread from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{yupResolver}from'@hookform/resolvers/yup';import{Controller,useForm}from'react-hook-form';import Button from'@mui/material/Button';import ClickAwayListener from'@mui/material/ClickAwayListener';import IconButton from'@mui/material/IconButton';import InputAdornment from'@mui/material/InputAdornment';import TextField from'@mui/material/TextField';import{useEffect,useState}from'react';import{useDispatch}from'react-redux';import*as yup from'yup';import _ from'@lodash';import FuseSvgIcon from'@fuse/core/FuseSvgIcon';import{newCard}from'../../store/cardsSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var defaultValues={title:''};/**\r\n * Form Validation Schema\r\n */var schema=yup.object().shape({title:yup.string().required('You must enter a title')});function BoardAddCard(props){var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),formOpen=_useState2[0],setFormOpen=_useState2[1];var _useForm=useForm({mode:'onChange',defaultValues:defaultValues,resolver:yupResolver(schema)}),control=_useForm.control,formState=_useForm.formState,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset;var isValid=formState.isValid,dirtyFields=formState.dirtyFields,errors=formState.errors;useEffect(function(){if(!formOpen){reset(defaultValues);}},[formOpen,reset]);function handleOpenForm(ev){ev.stopPropagation();setFormOpen(true);}function handleCloseForm(){setFormOpen(false);}function onSubmit(newData){dispatch(newCard({listId:props.listId,newData:newData})).then(function(){props.onCardAdded();});handleCloseForm();}return/*#__PURE__*/_jsx(\"div\",{className:\"w-full\",children:formOpen?/*#__PURE__*/_jsx(ClickAwayListener,{onClickAway:handleCloseForm,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(Controller,{name:\"title\",control:control,render:function render(_ref){var field=_ref.field;return/*#__PURE__*/_jsx(TextField,{className:\"mb-16\",required:true,fullWidth:true,variant:\"filled\",label:\"Card title\",autoFocus:true,InputProps:_objectSpread(_objectSpread({},field),{},{endAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"end\",children:/*#__PURE__*/_jsx(IconButton,{onClick:handleCloseForm,size:\"large\",children:/*#__PURE__*/_jsx(FuseSvgIcon,{size:18,children:\"heroicons-outline:x\"})})})})});}}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center\",children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",type:\"submit\",disabled:_.isEmpty(dirtyFields)||!isValid,size:\"small\",children:\"Add\"})})]})}):/*#__PURE__*/_jsx(Button,{onClick:handleOpenForm,classes:{root:'font-medium w-full rounded-lg p-24 justify-start'},startIcon:/*#__PURE__*/_jsx(FuseSvgIcon,{children:\"heroicons-outline:plus-circle\"}),sx:{color:'text.secondary'},children:\"Add another card\"})});}export default BoardAddCard;","map":null,"metadata":{},"sourceType":"module"}