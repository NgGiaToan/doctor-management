{"ast":null,"code":"import _defineProperty from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import AppBar from'@mui/material/AppBar';import{styled,useTheme}from'@mui/material/styles';import Avatar from'@mui/material/Avatar';import IconButton from'@mui/material/IconButton';import Paper from'@mui/material/Paper';import Toolbar from'@mui/material/Toolbar';import Typography from'@mui/material/Typography';import withReducer from'app/store/withReducer';import keycode from'keycode';import{memo,useCallback,useEffect,useRef}from'react';import{useDispatch,useSelector}from'react-redux';import{useSwipeable}from'react-swipeable';import FuseSvgIcon from'@fuse/core/FuseSvgIcon';import Chat from'./Chat';import ContactList from'./ContactList';import reducer from'./store';import{getContacts,selectContacts,selectSelectedContactId}from'./store/contactsSlice';import{closeChatPanel,openChatPanel,selectChatPanelState}from'./store/stateSlice';import{getUserData}from'./store/userSlice';import{getChats}from'./store/chatsSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Root=styled('div')(function(_ref){var theme=_ref.theme,opened=_ref.opened;return _objectSpread(_objectSpread(_objectSpread(_defineProperty({position:'sticky',display:'flex',top:0,width:70,maxWidth:70,minWidth:70,height:'100vh',zIndex:1000},theme.breakpoints.down('lg'),{position:'fixed',height:'100%',width:0,maxWidth:0,minWidth:0}),opened&&{overflow:'visible'}),!opened&&{overflow:'hidden',animation:\"hide-panel 1ms linear \".concat(theme.transitions.duration.standard),animationFillMode:'forwards'}),{},{'& > .panel':_objectSpread(_objectSpread({position:'absolute',top:0,right:0,bottom:0,left:0,width:360,minWidth:360,height:'100%',margin:0,overflow:'hidden',zIndex:1000,backgroundColor:theme.palette.background.paper,boxShadow:'0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',transform:'translate3d(0,0,0)',transition:theme.transitions.create(['transform'],{easing:theme.transitions.easing.easeInOut,duration:theme.transitions.duration.standard})},opened&&{transform:theme.direction==='rtl'?'translate3d(290px,0,0)':'translate3d(-290px,0,0)'}),{},_defineProperty({},theme.breakpoints.down('lg'),_objectSpread({left:'auto',position:'fixed',transform:theme.direction==='rtl'?'translate3d(-360px,0,0)':'translate3d(360px,0,0)',boxShadow:'none',width:320,minWidth:320,maxWidth:'100%'},opened&&{transform:'translate3d(0,0,0)',boxShadow:'0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)'}))),'@keyframes hide-panel':{'0%':{overflow:'visible'},'99%':{overflow:'visible'},'100%':{overflow:'hidden'}}});});function ChatPanel(props){var dispatch=useDispatch();var contacts=useSelector(selectContacts);var selectedContactId=useSelector(selectSelectedContactId);var state=useSelector(selectChatPanelState);var theme=useTheme();var ref=useRef();var handlers=useSwipeable({onSwipedLeft:function onSwipedLeft(){return state&&theme.direction==='rtl'&&dispatch(closeChatPanel());},onSwipedRight:function onSwipedRight(){return state&&theme.direction==='ltr'&&dispatch(closeChatPanel());}});var selectedContact=contacts.find(function(_contact){return _contact.id===selectedContactId;});var handleDocumentKeyDown=useCallback(function(event){if(keycode(event)==='esc'){dispatch(closeChatPanel());}},[dispatch]);useEffect(function(){dispatch(getUserData());dispatch(getContacts());dispatch(getChats());return function(){document.removeEventListener('keydown',handleDocumentKeyDown);};},[dispatch,handleDocumentKeyDown]);useEffect(function(){if(state){document.addEventListener('keydown',handleDocumentKeyDown);}else{document.removeEventListener('keydown',handleDocumentKeyDown);}},[handleDocumentKeyDown,state]);/**\r\n   * Click Away Listener\r\n   */useEffect(function(){function handleDocumentClick(ev){if(ref.current&&!ref.current.contains(ev.target)){dispatch(closeChatPanel());}}if(state){document.addEventListener('click',handleDocumentClick,true);}else{document.removeEventListener('click',handleDocumentClick,true);}return function(){document.removeEventListener('click',handleDocumentClick,true);};},[state,dispatch]);return/*#__PURE__*/_jsx(Root,_objectSpread(_objectSpread({opened:state?1:0},handlers),{},{children:/*#__PURE__*/_jsxs(\"div\",{className:\"panel flex flex-col max-w-full\",ref:ref,children:[/*#__PURE__*/_jsx(AppBar,{position:\"static\",className:\"shadow-md\",children:/*#__PURE__*/_jsxs(Toolbar,{className:\"px-4\",children:[(!state||!selectedContactId)&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-1 items-center px-8 space-x-12\",children:[/*#__PURE__*/_jsx(IconButton,{className:\"\",color:\"inherit\",onClick:function onClick(ev){return dispatch(openChatPanel());},size:\"large\",children:/*#__PURE__*/_jsx(FuseSvgIcon,{size:24,children:\"heroicons-outline:chat-alt-2\"})}),!selectedContactId&&/*#__PURE__*/_jsx(Typography,{className:\"text-16\",color:\"inherit\",children:\"Team Chat\"})]}),state&&selectedContact&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-1 items-center px-12\",children:[/*#__PURE__*/_jsx(Avatar,{src:selectedContact.avatar}),/*#__PURE__*/_jsx(Typography,{className:\"mx-16 text-16\",color:\"inherit\",children:selectedContact.name})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex px-4\",children:/*#__PURE__*/_jsx(IconButton,{onClick:function onClick(ev){return dispatch(closeChatPanel());},color:\"inherit\",size:\"large\",children:/*#__PURE__*/_jsx(FuseSvgIcon,{children:\"heroicons-outline:x\"})})})]})}),/*#__PURE__*/_jsxs(Paper,{className:\"flex flex-1 flex-row min-h-px shadow-0\",children:[/*#__PURE__*/_jsx(ContactList,{className:\"flex shrink-0\"}),state&&selectedContact?/*#__PURE__*/_jsx(Chat,{className:\"flex flex-1 z-10\"}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col flex-1 items-center justify-center p-24\",children:[/*#__PURE__*/_jsx(FuseSvgIcon,{size:128,color:\"disabled\",children:\"heroicons-outline:chat\"}),/*#__PURE__*/_jsx(Typography,{className:\"px-16 pb-24 mt-24 text-center\",color:\"text.secondary\",children:\"Select a contact to start a conversation.\"})]})]})]})}));}export default withReducer('chatPanel',reducer)(/*#__PURE__*/memo(ChatPanel));","map":null,"metadata":{},"sourceType":"module"}