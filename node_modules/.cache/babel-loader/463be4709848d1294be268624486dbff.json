{"ast":null,"code":"import FuseHighlight from'@fuse/core/FuseHighlight';import Paper from'@mui/material/Paper';import Table from'@mui/material/Table';import TableBody from'@mui/material/TableBody';import TableCell from'@mui/material/TableCell';import TableHead from'@mui/material/TableHead';import TableRow from'@mui/material/TableRow';import Typography from'@mui/material/Typography';/* eslint import/no-webpack-loader-syntax: off */ /* eslint import/extensions: off */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function FuseAuthorizationDoc(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",className:\"mb-40 font-700\",children:\"FuseAuthorization\"}),/*#__PURE__*/_jsxs(Typography,{className:\"mb-16\",component:\"p\",children:[/*#__PURE__*/_jsx(\"code\",{children:\"FuseAuthorization\"}),\" is the authorization component of the Fuse React. It restricts unauthorized user access by looking at \",/*#__PURE__*/_jsx(\"b\",{children:\"route configs\"}),\" and \",/*#__PURE__*/_jsx(\"b\",{children:\"user.role\"}),\".\"]}),/*#__PURE__*/_jsx(Typography,{className:\"text-20 mt-20 mb-10 font-700\",variant:\"h5\",children:\"Setup\"}),/*#__PURE__*/_jsx(Typography,{className:\"inline-block mb-8 italic\",component:\"code\",children:\"src/app/App.js\"}),/*#__PURE__*/_jsx(FuseHighlight,{component:\"pre\",className:\"language-jsx\",children:require('!raw-loader!src/app/App.js')}),/*#__PURE__*/_jsx(Typography,{className:\"text-20 mt-20 mb-10 font-700\",variant:\"h5\",children:\"Configuration\"}),/*#__PURE__*/_jsx(Typography,{className:\"text-16 mt-16 mb-10 font-700\",variant:\"h6\",children:\"Route Configuration:\"}),/*#__PURE__*/_jsxs(Typography,{className:\"mb-16\",component:\"p\",children:[\"You need to define authorization (auth) in the \",/*#__PURE__*/_jsx(\"b\",{children:\"route config files\"}),\" to control the access via permission roles.\"]}),/*#__PURE__*/_jsx(Typography,{className:\"mt-32 mb-8\",variant:\"subtitle2\",children:\"Example Usage:\"}),/*#__PURE__*/_jsx(Typography,{className:\"inline-block mb-8 italic\",component:\"code\",children:\"src/app/main/auth/admin-role-example/AdminRoleExampleConfig.js\"}),/*#__PURE__*/_jsx(FuseHighlight,{component:\"pre\",className:\"language-jsx\",children:require('!raw-loader!src/app/main/auth/admin-role-example/AdminRoleExampleConfig.js')}),/*#__PURE__*/_jsx(Typography,{className:\"my-16\",component:\"p\",children:\"You can also give different auth values for individual routes with writing auth value inside the route object.\"}),/*#__PURE__*/_jsx(Paper,{className:\"max-w-md my-16\",children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{className:\"font-semibold text-14\",children:\"Authorization Role (auth) options\"}),/*#__PURE__*/_jsx(TableCell,{})]})}),/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(\"code\",{children:\"null\"})}),/*#__PURE__*/_jsx(TableCell,{children:\"Do not check, allow everyone\"})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(\"code\",{children:\"[]\"})}),/*#__PURE__*/_jsx(TableCell,{children:\"Only guest allowed\"})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(\"code\",{children:\"[admin,user]\"})}),/*#__PURE__*/_jsx(TableCell,{children:\"Only 'admin' and 'user' roles are allowed\"})]})]})]})}),/*#__PURE__*/_jsx(Typography,{className:\"mt-48 mb-8\",variant:\"h6\",children:\"User.role Configuration:\"}),/*#__PURE__*/_jsxs(Typography,{className:\"mb-16\",component:\"p\",children:[\"User \",/*#__PURE__*/_jsx(\"b\",{children:\"role\"}),\" and \",/*#__PURE__*/_jsx(\"b\",{children:\"data\"}),\" are stored at \",/*#__PURE__*/_jsx(\"b\",{children:\"user\"}),\" in the redux store.\"]}),/*#__PURE__*/_jsx(Typography,{className:\"mb-16\",component:\"p\",children:\"After successful login user.role will be updated and the FuseAuthorization automatically redirects the authorized user.\"}),/*#__PURE__*/_jsx(Typography,{className:\"inline-block mb-8 italic\",component:\"code\",children:\"app/store/userSlice.js (initial user state)\"}),/*#__PURE__*/_jsx(FuseHighlight,{component:\"pre\",className:\"language-js\",children:\"  \\n                const initialState = {\\n                role: [],//guest\\n                data: {\\n                    'displayName': 'John Doe',\\n                    'photoURL'   : 'assets/images/avatars/Velazquez.jpg',\\n                    'email'      : 'johndoe@withinpixels.com',\\n                    shortcuts    : [\\n                      'calendar',\\n                      'mail',\\n                      'contacts',\\n                      'todo'\\n                    ]\\n                  }\\n                };\\n       \"}),/*#__PURE__*/_jsx(Paper,{className:\"max-w-md my-16\",children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{className:\"font-semibold text-14\",children:\"User Role options\"}),/*#__PURE__*/_jsx(TableCell,{})]})}),/*#__PURE__*/_jsxs(TableBody,{children:[/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsxs(TableCell,{children:[/*#__PURE__*/_jsx(\"code\",{children:\"null\"}),\" or \",/*#__PURE__*/_jsx(\"code\",{children:\"undefined\"}),\" or \",/*#__PURE__*/_jsx(\"code\",{children:\"[]\"})]}),/*#__PURE__*/_jsx(TableCell,{children:\"Guest\"})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsxs(TableCell,{children:[/*#__PURE__*/_jsx(\"code\",{children:\"['admin','user']\"}),\" (array)\"]}),/*#__PURE__*/_jsx(TableCell,{children:\"User has roles 'admin' and 'user'\"})]}),/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsxs(TableCell,{children:[/*#__PURE__*/_jsx(\"code\",{children:\"\\\"admin\\\"\"}),\" (string)\"]}),/*#__PURE__*/_jsx(TableCell,{children:\"User has 'admin' role\"})]})]})]})}),/*#__PURE__*/_jsx(Typography,{className:\"mt-48 mb-8\",variant:\"h6\",children:\"Navigation Item Configuration:\"}),/*#__PURE__*/_jsxs(Typography,{className:\"mb-16\",component:\"p\",children:[\"You can control the navigation \",/*#__PURE__*/_jsx(\"b\",{children:\"item/group/collapse\"}),\" visibility by adding \",/*#__PURE__*/_jsx(\"b\",{children:\"auth\"}),\"property in \",/*#__PURE__*/_jsx(\"code\",{children:\"app/configs/NavigationConfig.js\"}),\".\"]}),/*#__PURE__*/_jsx(Typography,{className:\"mt-32 mb-8\",variant:\"subtitle2\",children:\"Example Usage:\"}),/*#__PURE__*/_jsx(FuseHighlight,{component:\"pre\",className:\"language-js\",children:\"\\n\\t\\t\\t\\t\\t {\\n\\t\\t\\t\\t\\t\\t'id'   : 'only-admin-navigation-item',\\n\\t\\t\\t\\t\\t\\t'title': 'Nav item only for Admin',\\n\\t\\t\\t\\t\\t\\t'type' : 'item',\\n\\t\\t\\t\\t\\t\\t'auth' : authRoles.admin,//['admin']\\n\\t\\t\\t\\t\\t\\t'url'  : '/auth/admin-role-example',\\n\\t\\t\\t\\t\\t\\t'icon' : 'verified_user'\\n\\t\\t\\t\\t\\t  },\\n\\t\\t\\t\\t\"}),/*#__PURE__*/_jsx(Typography,{className:\"mt-48 mb-4\",variant:\"h5\",children:\"Default Auth value:\"}),/*#__PURE__*/_jsxs(Typography,{className:\"\",component:\"p\",children:[\"If you don't want to set auth on every page config;\",/*#__PURE__*/_jsx(\"br\",{}),\"you can give defaultAuth role value in the file\",' ',/*#__PURE__*/_jsx(\"code\",{children:\"src/app/configs/settingsConfig.js\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"The individual route configs which has auth option won't be overridden.\"]}),/*#__PURE__*/_jsx(Typography,{className:\"mt-24 mb-4\",variant:\"h6\",children:\"Making the whole app auth protected by default:\"}),/*#__PURE__*/_jsx(Typography,{className:\"mb-12\",variant:\"subtitle2\",children:\"src/app/configs/settingsConfig.js\"}),/*#__PURE__*/_jsx(FuseHighlight,{component:\"pre\",className:\"language-js\",children:\"\\n\\t\\t\\t\\t\\tdefaultAuth:['admin','staff','user']\\n\\t\\t\\t\\t\"}),/*#__PURE__*/_jsx(Typography,{className:\"mt-24 mb-4\",variant:\"h6\",children:\"Making the whole app without authorization by default\"}),/*#__PURE__*/_jsx(Typography,{className:\"mb-12\",variant:\"subtitle2\",children:\"src/app/configs/settingsConfig.js\"}),/*#__PURE__*/_jsx(FuseHighlight,{component:\"pre\",className:\"language-js\",children:\"\\n\\t\\t\\t\\tdefaultAuth: null\\n\\t\\t\\t\\t\"}),/*#__PURE__*/_jsx(Typography,{className:\"mt-48 mb-4\",variant:\"h5\",children:\"Redirect the logged-in user to a specific route depending on his role\"}),/*#__PURE__*/_jsxs(Typography,{className:\"mb-16\",component:\"p\",children:[\"Before dispatching \",/*#__PURE__*/_jsx(\"b\",{children:\"SET_USER_DATA\"}),\" action you can set loginRedirectUrl on\"]}),/*#__PURE__*/_jsx(Typography,{className:\"inline-block mb-8 italic\",component:\"code\",children:\"app/store/userSlice.js\"}),/*#__PURE__*/_jsx(FuseHighlight,{component:\"pre\",className:\"language-js\",children:\"\\n\\t\\t\\t\\texport const setUser = createAsyncThunk('user/setUser', async (user, { dispatch, getState }) => {\\n            /*\\n              You can redirect the logged-in user to a specific route depending on his role\\n              */\\n            if (user.loginRedirectUrl) {\\n              settingsConfig.loginRedirectUrl = user.loginRedirectUrl; // for example 'apps/academy'\\n            }\\n          \\n            return user;\\n          });\\n\\t\\t\\t\\t\"}),/*#__PURE__*/_jsx(Typography,{className:\"mt-48 mb-4\",variant:\"h5\",children:\"Uncaught Error: Maximum update depth exceeded: Infinite loops\"}),/*#__PURE__*/_jsxs(Typography,{className:\"mb-16\",component:\"p\",children:[\"If you are getting this error, make sure authenticated user has rights to access main route\",' ',/*#__PURE__*/_jsx(\"b\",{children:\"\\\"/\\\"\"}),\"or it's redirected route path.\"]}),/*#__PURE__*/_jsxs(Typography,{className:\"mb-16\",component:\"p\",children:[\"After successful login, every authenticated user should be able to access to main route path\",' ',/*#__PURE__*/_jsx(\"b\",{children:\"\\\"/\\\"\"}),\" or redirected route path.\"]})]});}export default FuseAuthorizationDoc;","map":null,"metadata":{},"sourceType":"module"}