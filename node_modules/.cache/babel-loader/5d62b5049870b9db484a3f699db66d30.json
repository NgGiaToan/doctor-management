{"ast":null,"code":"import _toConsumableArray from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import FuseScrollbars from'@fuse/core/FuseScrollbars';import FuseUtils from'@fuse/utils';import Input from'@mui/material/Input';import List from'@mui/material/List';import Paper from'@mui/material/Paper';import Typography from'@mui/material/Typography';import{motion}from'framer-motion';import{useContext,useMemo,useState}from'react';import{useDispatch,useSelector}from'react-redux';import clsx from'clsx';import FuseSvgIcon from'@fuse/core/FuseSvgIcon';import Box from'@mui/material/Box';import{lighten}from'@mui/material/styles';import ContactListItem from'./ContactListItem';import{getChat}from'../../store/chatSlice';import{selectContacts}from'../../store/contactsSlice';import{selectChats}from'../../store/chatsSlice';import ContactAvatar from'../../ContactAvatar';import MainSidebarMoreMenu from'./MainSidebarMoreMenu';import{ChatAppContext}from'../../ChatApp';import{selectUser}from'../../store/userSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MainSidebar(props){var _useContext=useContext(ChatAppContext),setUserSidebarOpen=_useContext.setUserSidebarOpen;var dispatch=useDispatch();var contacts=useSelector(selectContacts);var chats=useSelector(selectChats);var user=useSelector(selectUser);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),searchText=_useState2[0],setSearchText=_useState2[1];function handleSearchText(event){setSearchText(event.target.value);}return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col flex-auto h-full\",children:[/*#__PURE__*/_jsxs(Box,{className:\"py-16 px-32 border-b-1\",sx:{backgroundColor:function backgroundColor(theme){return theme.palette.mode==='light'?lighten(theme.palette.background.default,0.4):lighten(theme.palette.background.default,0.02);}},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-16\",children:[user&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center cursor-pointer\",onClick:function onClick(){return setUserSidebarOpen(true);},onKeyDown:function onKeyDown(){return setUserSidebarOpen(true);},role:\"button\",tabIndex:0,children:[/*#__PURE__*/_jsx(ContactAvatar,{className:\"relative\",contact:user}),/*#__PURE__*/_jsx(Typography,{className:\"mx-16 font-medium\",children:user.name})]}),/*#__PURE__*/_jsx(MainSidebarMoreMenu,{className:\"-mx-16\"})]}),useMemo(function(){return/*#__PURE__*/_jsxs(Paper,{className:\"flex p-4 items-center w-full px-16 py-4 border-1 h-40 rounded-full shadow-none\",children:[/*#__PURE__*/_jsx(FuseSvgIcon,{color:\"action\",size:20,children:\"heroicons-solid:search\"}),/*#__PURE__*/_jsx(Input,{placeholder:\"Search or start new chat\",className:\"flex flex-1 px-8\",disableUnderline:true,fullWidth:true,value:searchText,inputProps:{'aria-label':'Search'},onChange:handleSearchText})]});},[searchText])]}),/*#__PURE__*/_jsx(FuseScrollbars,{className:\"overflow-y-auto flex-1\",children:/*#__PURE__*/_jsx(List,{className:\"w-full\",children:useMemo(function(){function getFilteredArray(arr,_searchText){if(_searchText.length===0){return arr;}return FuseUtils.filterArrayByString(arr,_searchText);}var chatListContacts=contacts.length>0&&chats.length>0?chats.map(function(_chat){return _objectSpread(_objectSpread({},_chat),contacts.find(function(_contact){return _contact.id===_chat.contactId;}));}):[];var filteredContacts=getFilteredArray(_toConsumableArray(contacts),searchText);var filteredChatList=getFilteredArray(_toConsumableArray(chatListContacts),searchText);var container={show:{transition:{staggerChildren:0.1}}};var item={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return/*#__PURE__*/_jsxs(motion.div,{className:\"flex flex-col shrink-0\",variants:container,initial:\"hidden\",animate:\"show\",children:[filteredChatList.length>0&&/*#__PURE__*/_jsx(motion.div,{variants:item,children:/*#__PURE__*/_jsx(Typography,{className:\"font-medium text-20 px-32 py-24\",color:\"secondary.main\",children:\"Chats\"})}),filteredChatList.map(function(contact,index){return/*#__PURE__*/_jsx(motion.div,{variants:item,children:/*#__PURE__*/_jsx(\"div\",{className:clsx(filteredChatList.length!==index+1&&'border-b-1'),children:/*#__PURE__*/_jsx(ContactListItem,{chat:true,contact:contact,onContactClick:function onContactClick(contactId){return dispatch(getChat(contactId));}})})},contact.id);}),filteredContacts.length>0&&/*#__PURE__*/_jsx(motion.div,{variants:item,children:/*#__PURE__*/_jsx(Typography,{className:\"font-medium text-20 px-32 py-24\",color:\"secondary.main\",children:\"Contacts\"})}),filteredContacts.map(function(contact,index){return/*#__PURE__*/_jsx(motion.div,{variants:item,children:/*#__PURE__*/_jsx(\"div\",{className:clsx(filteredContacts.length!==index+1&&'border-b-1'),children:/*#__PURE__*/_jsx(ContactListItem,{contact:contact,onContactClick:function onContactClick(contactId){return dispatch(getChat(contactId));}})})},contact.id);})]});},[contacts,chats,searchText,dispatch])})})]});}export default MainSidebar;","map":null,"metadata":{},"sourceType":"module"}