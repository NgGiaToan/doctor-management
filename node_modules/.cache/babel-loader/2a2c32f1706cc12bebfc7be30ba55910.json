{"ast":null,"code":"import _objectSpread from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{yupResolver}from'@hookform/resolvers/yup';import{Controller,useForm}from'react-hook-form';import FuseUtils from'@fuse/utils/FuseUtils';import Button from'@mui/material/Button';import FormControlLabel from'@mui/material/FormControlLabel';import IconButton from'@mui/material/IconButton';import Switch from'@mui/material/Switch';import TextField from'@mui/material/TextField';import{DateTimePicker}from'@mui/lab';import{useCallback,useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import*as yup from'yup';import _ from'@lodash';import{Popover}from'@mui/material';import FuseSvgIcon from'@fuse/core/FuseSvgIcon';import{addEvent,closeEditEventDialog,closeNewEventDialog,removeEvent,selectEventDialog,updateEvent}from'../../store/eventsSlice';import EventLabelSelect from'../../EventLabelSelect';import EventModel from'../../model/EventModel';import{selectFirstLabelId}from'../../store/labelsSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var defaultValues=EventModel();/**\r\n * Form Validation Schema\r\n */var schema=yup.object().shape({title:yup.string().required('You must enter a title')});function EventDialog(props){var dispatch=useDispatch();var eventDialog=useSelector(selectEventDialog);var firstLabelId=useSelector(selectFirstLabelId);var _useForm=useForm({defaultValues:defaultValues,mode:'onChange',resolver:yupResolver(schema)}),reset=_useForm.reset,formState=_useForm.formState,watch=_useForm.watch,control=_useForm.control,getValues=_useForm.getValues;var isValid=formState.isValid,dirtyFields=formState.dirtyFields,errors=formState.errors;var start=watch('start');var end=watch('end');var id=watch('id');/**\r\n   * Initialize Dialog with Data\r\n   */var initDialog=useCallback(function(){/**\r\n     * Dialog type: 'edit'\r\n     */if(eventDialog.type==='edit'&&eventDialog.data){reset(_objectSpread({},eventDialog.data));}/**\r\n     * Dialog type: 'new'\r\n     */if(eventDialog.type==='new'){reset(_objectSpread(_objectSpread(_objectSpread({},defaultValues),eventDialog.data),{},{extendedProps:_objectSpread(_objectSpread({},defaultValues.extendedProps),{},{label:firstLabelId}),id:FuseUtils.generateGUID()}));}},[eventDialog.data,eventDialog.type,reset]);/**\r\n   * On Dialog Open\r\n   */useEffect(function(){if(eventDialog.props.open){initDialog();}},[eventDialog.props.open,initDialog]);/**\r\n   * Close Dialog\r\n   */function closeComposeDialog(){return eventDialog.type==='edit'?dispatch(closeEditEventDialog()):dispatch(closeNewEventDialog());}/**\r\n   * Form Submit\r\n   */function onSubmit(ev){ev.preventDefault();var data=getValues();if(eventDialog.type==='new'){dispatch(addEvent(data));}else{dispatch(updateEvent(_objectSpread(_objectSpread({},eventDialog.data),data)));}closeComposeDialog();}/**\r\n   * Remove Event\r\n   */function handleRemove(){dispatch(removeEvent(id));closeComposeDialog();}return/*#__PURE__*/_jsx(Popover,_objectSpread(_objectSpread({},eventDialog.props),{},{anchorReference:\"anchorPosition\",anchorOrigin:{vertical:'center',horizontal:'right'},transformOrigin:{vertical:'center',horizontal:'left'},onClose:closeComposeDialog,component:\"form\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col max-w-full p-24 pt-32 sm:pt-40 sm:p-32 w-480\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex sm:space-x-24 mb-16\",children:[/*#__PURE__*/_jsx(FuseSvgIcon,{className:\"hidden sm:inline-flex mt-16\",color:\"action\",children:\"heroicons-outline:pencil-alt\"}),/*#__PURE__*/_jsx(Controller,{name:\"title\",control:control,render:function render(_ref){var _errors$title;var field=_ref.field;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{id:\"title\",label:\"Title\",className:\"flex-auto\",error:!!errors.title,helperText:errors===null||errors===void 0?void 0:(_errors$title=errors.title)===null||_errors$title===void 0?void 0:_errors$title.message,InputLabelProps:{shrink:true},variant:\"outlined\",autoFocus:true,required:true,fullWidth:true}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex sm:space-x-24 mb-16\",children:[/*#__PURE__*/_jsx(FuseSvgIcon,{className:\"hidden sm:inline-flex mt-16\",color:\"action\",children:\"heroicons-outline:calendar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-column sm:flex-row w-full items-center space-x-16\",children:[/*#__PURE__*/_jsx(Controller,{name:\"start\",control:control,defaultValue:\"\",render:function render(_ref2){var _ref2$field=_ref2.field,onChange=_ref2$field.onChange,value=_ref2$field.value;return/*#__PURE__*/_jsx(DateTimePicker,{value:value,onChange:onChange,renderInput:function renderInput(_props){return/*#__PURE__*/_jsx(TextField,_objectSpread({label:\"Start\",className:\"mt-8 mb-16 w-full\"},_props));},className:\"mt-8 mb-16 w-full\",maxDate:end});}}),/*#__PURE__*/_jsx(Controller,{name:\"end\",control:control,defaultValue:\"\",render:function render(_ref3){var _ref3$field=_ref3.field,onChange=_ref3$field.onChange,value=_ref3$field.value;return/*#__PURE__*/_jsx(DateTimePicker,{value:value,onChange:onChange,renderInput:function renderInput(_props){return/*#__PURE__*/_jsx(TextField,_objectSpread({label:\"End\",className:\"mt-8 mb-16 w-full\"},_props));},minDate:start});}})]}),/*#__PURE__*/_jsx(Controller,{name:\"allDay\",control:control,render:function render(_ref4){var _ref4$field=_ref4.field,_onChange=_ref4$field.onChange,value=_ref4$field.value;return/*#__PURE__*/_jsx(FormControlLabel,{className:\"mt-8\",label:\"All Day\",control:/*#__PURE__*/_jsx(Switch,{onChange:function onChange(ev){_onChange(ev.target.checked);},checked:value,name:\"allDay\"})});}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex sm:space-x-24 mb-16\",children:[/*#__PURE__*/_jsx(FuseSvgIcon,{className:\"hidden sm:inline-flex mt-16\",color:\"action\",children:\"heroicons-outline:tag\"}),/*#__PURE__*/_jsx(Controller,{name:\"extendedProps.label\",control:control,render:function render(_ref5){var field=_ref5.field;return/*#__PURE__*/_jsx(EventLabelSelect,_objectSpread({className:\"mt-8 mb-16\"},field));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex sm:space-x-24 mb-16\",children:[/*#__PURE__*/_jsx(FuseSvgIcon,{className:\"hidden sm:inline-flex mt-16\",color:\"action\",children:\"heroicons-outline:menu-alt-2\"}),/*#__PURE__*/_jsx(Controller,{name:\"extendedProps.desc\",control:control,render:function render(_ref6){var field=_ref6.field;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{className:\"mt-8 mb-16\",id:\"desc\",label:\"Description\",type:\"text\",multiline:true,rows:5,variant:\"outlined\",fullWidth:true}));}})]}),eventDialog.type==='new'?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-1\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:onSubmit,disabled:_.isEmpty(dirtyFields)||!isValid,children:\"Add\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-1\"}),/*#__PURE__*/_jsx(IconButton,{onClick:handleRemove,size:\"large\",children:/*#__PURE__*/_jsx(FuseSvgIcon,{children:\"heroicons-outline:trash\"})}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:onSubmit,disabled:_.isEmpty(dirtyFields)||!isValid,children:\"Save\"})]})]})}));}export default EventDialog;","map":null,"metadata":{},"sourceType":"module"}