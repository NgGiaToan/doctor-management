{"ast":null,"code":"import _objectSpread from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\giato\\\\Downloads\\\\Workspace\\\\.Net\\\\api\\\\doctor-management-fe\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useEffect,useState}from'react';import{Controller,useForm}from'react-hook-form';import _ from'@lodash';import{darkPaletteText,lightPaletteText}from'app/configs/themesConfig';import{darken,getContrastRatio,lighten}from'@mui/material/styles';import{useTheme}from'@mui/styles';import AppBar from'@mui/material/AppBar';import Toolbar from'@mui/material/Toolbar';import{Dialog,DialogActions,DialogContent,Icon,TextField}from'@mui/material';import Typography from'@mui/material/Typography';import ButtonGroup from'@mui/material/ButtonGroup';import Button from'@mui/material/Button';import SectionPreview from'./SectionPreview';import PalettePreview from'./PalettePreview';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function isDark(color){return getContrastRatio(color,'#ffffff')>=3;}function PaletteSelector(props){var value=props.value;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),openDialog=_useState2[0],setOpenDialog=_useState2[1];var theme=useTheme();var methods=useForm({defaultValues:{},mode:'onChange'});var reset=methods.reset,formState=methods.formState,trigger=methods.trigger,handleSubmit=methods.handleSubmit,watch=methods.watch,control=methods.control,setValue=methods.setValue;var isValid=formState.isValid,dirtyFields=formState.dirtyFields,errors=formState.errors;useEffect(function(){reset(value);},[value,reset]);var form=watch();var formType=watch('palette.mode');useEffect(function(){// console.info(form);\n},[form]);useEffect(function(){if(!formType||!openDialog){return;}setTimeout(function(){return trigger(['palette.background.paper','palette.background.default']);});},[formType,openDialog,trigger]);var backgroundColorValidation=function backgroundColorValidation(v){if(formType==='light'&&isDark(v)){return'Must be a light color';}if(formType==='dark'&&!isDark(v)){return'Must be a dark color';}return true;};/**\r\n   * Open Dialog\r\n   */function handleOpenDialog(ev){ev.preventDefault();ev.stopPropagation();setOpenDialog(true);}/**\r\n   * Close Dialog\r\n   */function handleCloseDialog(){setOpenDialog(false);}function onSubmit(formData){props.onChange(formData);handleCloseDialog();}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{onClick:handleOpenDialog,role:\"button\",children:props.trigger}),/*#__PURE__*/_jsxs(Dialog,{container:document.body,open:openDialog,onClose:handleCloseDialog,\"aria-labelledby\":\"form-dialog-title\",classes:{paper:'rounded-5 w-full'},children:[/*#__PURE__*/_jsx(AppBar,{elevation:0,position:\"static\",children:/*#__PURE__*/_jsxs(Toolbar,{className:\"flex w-full\",children:[/*#__PURE__*/_jsx(Icon,{className:\"mr-12\",children:\"palette\"}),/*#__PURE__*/_jsx(Typography,{variant:\"subtitle1\",color:\"inherit\",children:\"Edit palette\"})]})}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex w-full\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center p-24 flex-1\",children:[/*#__PURE__*/_jsx(Controller,{name:\"palette.mode\",control:control,render:function render(_ref){var _ref$field=_ref.field,_onChange=_ref$field.onChange,_value=_ref$field.value;return/*#__PURE__*/_jsxs(ButtonGroup,{disableElevation:true,variant:\"contained\",color:\"secondary\",className:\"mb-32\",children:[/*#__PURE__*/_jsx(Button,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_onChange('light');setValue('palette.text',lightPaletteText,{shouldDirty:true});case 2:case\"end\":return _context.stop();}}},_callee);})),variant:_value==='light'?'contained':'outlined',children:\"Light\"}),/*#__PURE__*/_jsx(Button,{onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_onChange('dark');setValue('palette.text',darkPaletteText,{shouldDirty:true});case 2:case\"end\":return _context2.stop();}}},_callee2);})),variant:_value==='dark'?'contained':'outlined',children:\"Dark\"})]});}}),/*#__PURE__*/_jsx(Controller,{name:\"palette.primary.main\",control:control,render:function render(_ref4){var _ref4$field=_ref4.field,_onChange=_ref4$field.onChange,_value=_ref4$field.value;return/*#__PURE__*/_jsx(TextField,{value:_value,onChange:function onChange(ev){_onChange(ev.target.value);setValue('palette.primary.light',lighten(ev.target.value,0.8),{shouldDirty:true});setValue('palette.primary.dark',darken(ev.target.value,0.2),{shouldDirty:true});setValue('palette.primary.contrastText',theme.palette.getContrastText(ev.target.value),{shouldDirty:true});},type:\"color\",variant:\"outlined\",className:\"mb-32\",label:\"Primary color\",InputProps:{className:'w-200  h-32'}});}}),/*#__PURE__*/_jsx(Controller,{name:\"palette.secondary.main\",control:control,render:function render(_ref5){var _ref5$field=_ref5.field,_onChange=_ref5$field.onChange,_value=_ref5$field.value;return/*#__PURE__*/_jsx(TextField,{value:_value,onChange:function onChange(ev){_onChange(ev.target.value);setValue('palette.secondary.light',lighten(ev.target.value,0.8),{shouldDirty:true});setValue('palette.secondary.dark',darken(ev.target.value,0.2),{shouldDirty:true});setValue('palette.secondary.contrastText',theme.palette.getContrastText(ev.target.value),{shouldDirty:true});},type:\"color\",variant:\"outlined\",className:\"mb-32\",label:\"Secondary color\",InputProps:{className:'w-200 h-32'}});}}),/*#__PURE__*/_jsx(Controller,{name:\"palette.background.paper\",control:control,rules:{validate:{backgroundColorValidation:backgroundColorValidation}},render:function render(_ref6){var _errors$palette,_errors$palette$backg,_errors$palette2,_errors$palette2$back,_errors$palette2$back2;var field=_ref6.field;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{type:\"color\",variant:\"outlined\",className:\"mb-32\",label:\"Background paper\",InputProps:{className:'w-200 h-32'},error:!!(errors!==null&&errors!==void 0&&(_errors$palette=errors.palette)!==null&&_errors$palette!==void 0&&(_errors$palette$backg=_errors$palette.background)!==null&&_errors$palette$backg!==void 0&&_errors$palette$backg.paper),helperText:errors===null||errors===void 0?void 0:(_errors$palette2=errors.palette)===null||_errors$palette2===void 0?void 0:(_errors$palette2$back=_errors$palette2.background)===null||_errors$palette2$back===void 0?void 0:(_errors$palette2$back2=_errors$palette2$back.paper)===null||_errors$palette2$back2===void 0?void 0:_errors$palette2$back2.message}));}}),/*#__PURE__*/_jsx(Controller,{name:\"palette.background.default\",control:control,rules:{validate:{backgroundColorValidation:backgroundColorValidation}},render:function render(_ref7){var _errors$palette3,_errors$palette3$back,_errors$palette4,_errors$palette4$back,_errors$palette4$back2;var field=_ref7.field;return/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},field),{},{type:\"color\",variant:\"outlined\",className:\"\",label:\"Background default\",InputProps:{className:'w-200 h-32'},error:!!(errors!==null&&errors!==void 0&&(_errors$palette3=errors.palette)!==null&&_errors$palette3!==void 0&&(_errors$palette3$back=_errors$palette3.background)!==null&&_errors$palette3$back!==void 0&&_errors$palette3$back.default),helperText:errors===null||errors===void 0?void 0:(_errors$palette4=errors.palette)===null||_errors$palette4===void 0?void 0:(_errors$palette4$back=_errors$palette4.background)===null||_errors$palette4$back===void 0?void 0:(_errors$palette4$back2=_errors$palette4$back.default)===null||_errors$palette4$back2===void 0?void 0:_errors$palette4$back2.message}));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center p-48\",children:[/*#__PURE__*/_jsx(Typography,{className:\"text-16 font-semibold mb-16 -mt-48\",color:\"text.secondary\",children:\"Preview\"}),/*#__PURE__*/_jsx(PalettePreview,{className:\"\",palette:form.palette})]})]})}),/*#__PURE__*/_jsxs(DialogActions,{className:\"flex justify-between p-16\",children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseDialog,color:\"primary\",children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"secondary\",autoFocus:true,onClick:handleSubmit(onSubmit),disabled:_.isEmpty(dirtyFields)||!isValid,children:\"Save\"})]})]})]});}PaletteSelector.defaultProps={trigger:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center space-y-8 w-128 m-8\",children:[/*#__PURE__*/_jsx(SectionPreview,{section:\"\"}),/*#__PURE__*/_jsx(Typography,{className:\"flex-1 text-16 font-bold mb-24\",children:\"Edit Palette\"})]})};export default PaletteSelector;","map":null,"metadata":{},"sourceType":"module"}