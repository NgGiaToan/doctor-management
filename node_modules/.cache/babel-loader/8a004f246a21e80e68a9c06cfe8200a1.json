{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ValidContentExamples = void 0;\n\nvar ref_utils_1 = require(\"../../ref-utils\");\n\nvar utils_1 = require(\"../utils\");\n\nvar ValidContentExamples = function ValidContentExamples(opts) {\n  var _a;\n\n  var disallowAdditionalProperties = (_a = opts.disallowAdditionalProperties) !== null && _a !== void 0 ? _a : true;\n  return {\n    MediaType: {\n      leave: function leave(mediaType, ctx) {\n        var location = ctx.location,\n            resolve = ctx.resolve;\n        if (!mediaType.schema) return;\n\n        if (mediaType.example) {\n          resolveAndValidateExample(mediaType.example, location.child('example'));\n        } else if (mediaType.examples) {\n          for (var _i = 0, _Object$keys = Object.keys(mediaType.examples); _i < _Object$keys.length; _i++) {\n            var exampleName = _Object$keys[_i];\n            resolveAndValidateExample(mediaType.examples[exampleName], location.child(['examples', exampleName, 'value']), true);\n          }\n        }\n\n        function resolveAndValidateExample(example, location, isMultiple) {\n          if (ref_utils_1.isRef(example)) {\n            var resolved = resolve(example);\n            if (!resolved.location) return;\n            location = isMultiple ? resolved.location.child('value') : resolved.location;\n            example = resolved.node;\n          }\n\n          utils_1.validateExample(isMultiple ? example.value : example, mediaType.schema, location, ctx, disallowAdditionalProperties);\n        }\n      }\n    }\n  };\n};\n\nexports.ValidContentExamples = ValidContentExamples;","map":null,"metadata":{},"sourceType":"script"}