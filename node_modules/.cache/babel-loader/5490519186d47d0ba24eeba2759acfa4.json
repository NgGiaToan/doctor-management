{"ast":null,"code":"import _slicedToArray from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import FuseScrollbars from'@fuse/core/FuseScrollbars';import FuseUtils from'@fuse/utils';import _ from'@lodash';import Checkbox from'@mui/material/Checkbox';import Table from'@mui/material/Table';import TableBody from'@mui/material/TableBody';import TableCell from'@mui/material/TableCell';import TablePagination from'@mui/material/TablePagination';import TableRow from'@mui/material/TableRow';import Typography from'@mui/material/Typography';import{motion}from'framer-motion';import{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import withRouter from'@fuse/core/withRouter';import FuseLoading from'@fuse/core/FuseLoading';import OrdersStatus from'../order/OrdersStatus';import{getOrders,selectOrders,selectOrdersSearchText}from'../store/ordersSlice';import OrdersTableHead from'./OrdersTableHead';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function OrdersTable(props){var dispatch=useDispatch();var orders=useSelector(selectOrders);var searchText=useSelector(selectOrdersSearchText);var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),selected=_useState4[0],setSelected=_useState4[1];var _useState5=useState(orders),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),page=_useState8[0],setPage=_useState8[1];var _useState9=useState(10),_useState10=_slicedToArray(_useState9,2),rowsPerPage=_useState10[0],setRowsPerPage=_useState10[1];var _useState11=useState({direction:'asc',id:null}),_useState12=_slicedToArray(_useState11,2),order=_useState12[0],setOrder=_useState12[1];useEffect(function(){dispatch(getOrders()).then(function(){return setLoading(false);});},[dispatch]);useEffect(function(){if(searchText.length!==0){setData(FuseUtils.filterArrayByString(orders,searchText));setPage(0);}else{setData(orders);}},[orders,searchText]);function handleRequestSort(event,property){var id=property;var direction='desc';if(order.id===property&&order.direction==='desc'){direction='asc';}setOrder({direction:direction,id:id});}function handleSelectAllClick(event){if(event.target.checked){setSelected(data.map(function(n){return n.id;}));return;}setSelected([]);}function handleDeselect(){setSelected([]);}function handleClick(item){props.navigate(\"/apps/e-commerce/orders/\".concat(item.id));}function handleCheck(event,id){var selectedIndex=selected.indexOf(id);var newSelected=[];if(selectedIndex===-1){newSelected=newSelected.concat(selected,id);}else if(selectedIndex===0){newSelected=newSelected.concat(selected.slice(1));}else if(selectedIndex===selected.length-1){newSelected=newSelected.concat(selected.slice(0,-1));}else if(selectedIndex>0){newSelected=newSelected.concat(selected.slice(0,selectedIndex),selected.slice(selectedIndex+1));}setSelected(newSelected);}function handleChangePage(event,value){setPage(value);}function handleChangeRowsPerPage(event){setRowsPerPage(event.target.value);}if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-full\",children:/*#__PURE__*/_jsx(FuseLoading,{})});}if(data.length===0){return/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:0.1}},className:\"flex flex-1 items-center justify-center h-full\",children:/*#__PURE__*/_jsx(Typography,{color:\"text.secondary\",variant:\"h5\",children:\"There are no orders!\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"w-full flex flex-col min-h-full\",children:[/*#__PURE__*/_jsx(FuseScrollbars,{className:\"grow overflow-x-auto\",children:/*#__PURE__*/_jsxs(Table,{stickyHeader:true,className:\"min-w-xl\",\"aria-labelledby\":\"tableTitle\",children:[/*#__PURE__*/_jsx(OrdersTableHead,{selectedOrderIds:selected,order:order,onSelectAllClick:handleSelectAllClick,onRequestSort:handleRequestSort,rowCount:data.length,onMenuItemClick:handleDeselect}),/*#__PURE__*/_jsx(TableBody,{children:_.orderBy(data,[function(o){switch(order.id){case'id':{return parseInt(o.id,10);}case'customer':{return o.customer.firstName;}case'payment':{return o.payment.method;}case'status':{return o.status[0].name;}default:{return o[order.id];}}}],[order.direction]).slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage).map(function(n){var isSelected=selected.indexOf(n.id)!==-1;return/*#__PURE__*/_jsxs(TableRow,{className:\"h-72 cursor-pointer\",hover:true,role:\"checkbox\",\"aria-checked\":isSelected,tabIndex:-1,selected:isSelected,onClick:function onClick(event){return handleClick(n);},children:[/*#__PURE__*/_jsx(TableCell,{className:\"w-40 md:w-64 text-center\",padding:\"none\",children:/*#__PURE__*/_jsx(Checkbox,{checked:isSelected,onClick:function onClick(event){return event.stopPropagation();},onChange:function onChange(event){return handleCheck(event,n.id);}})}),/*#__PURE__*/_jsx(TableCell,{className:\"p-4 md:p-16\",component:\"th\",scope:\"row\",children:n.id}),/*#__PURE__*/_jsx(TableCell,{className:\"p-4 md:p-16\",component:\"th\",scope:\"row\",children:n.reference}),/*#__PURE__*/_jsx(TableCell,{className:\"p-4 md:p-16 truncate\",component:\"th\",scope:\"row\",children:\"\".concat(n.customer.firstName,\" \").concat(n.customer.lastName)}),/*#__PURE__*/_jsxs(TableCell,{className:\"p-4 md:p-16\",component:\"th\",scope:\"row\",align:\"right\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"$\"}),n.total]}),/*#__PURE__*/_jsx(TableCell,{className:\"p-4 md:p-16\",component:\"th\",scope:\"row\",children:n.payment.method}),/*#__PURE__*/_jsx(TableCell,{className:\"p-4 md:p-16\",component:\"th\",scope:\"row\",children:/*#__PURE__*/_jsx(OrdersStatus,{name:n.status[0].name})}),/*#__PURE__*/_jsx(TableCell,{className:\"p-4 md:p-16\",component:\"th\",scope:\"row\",children:n.date})]},n.id);})})]})}),/*#__PURE__*/_jsx(TablePagination,{className:\"shrink-0 border-t-1\",component:\"div\",count:data.length,rowsPerPage:rowsPerPage,page:page,backIconButtonProps:{'aria-label':'Previous Page'},nextIconButtonProps:{'aria-label':'Next Page'},onPageChange:handleChangePage,onRowsPerPageChange:handleChangeRowsPerPage})]});}export default withRouter(OrdersTable);","map":null,"metadata":{},"sourceType":"module"}