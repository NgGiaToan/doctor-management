{"ast":null,"code":"import _objectSpread from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import FuseLoading from'@fuse/core/FuseLoading';import FusePageCarded from'@fuse/core/FusePageCarded';import{useDeepCompareEffect}from'@fuse/hooks';import Button from'@mui/material/Button';import Tab from'@mui/material/Tab';import Tabs from'@mui/material/Tabs';import Typography from'@mui/material/Typography';import withReducer from'app/store/withReducer';import{motion}from'framer-motion';import{useEffect,useState}from'react';import{useDispatch,useSelector}from'react-redux';import{Link,useParams}from'react-router-dom';import _ from'@lodash';import{FormProvider,useForm}from'react-hook-form';import{yupResolver}from'@hookform/resolvers/yup';import*as yup from'yup';import useThemeMediaQuery from'@fuse/hooks/useThemeMediaQuery';import{getProduct,newProduct,resetProduct,selectProduct}from'../store/productSlice';import reducer from'../store';import ProductHeader from'./ProductHeader';import BasicInfoTab from'./tabs/BasicInfoTab';import InventoryTab from'./tabs/InventoryTab';import PricingTab from'./tabs/PricingTab';import ProductImagesTab from'./tabs/ProductImagesTab';import ShippingTab from'./tabs/ShippingTab';/**\r\n * Form Validation Schema\r\n */import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var schema=yup.object().shape({name:yup.string().required('You must enter a product name').min(5,'The product name must be at least 5 characters')});function Product(props){var dispatch=useDispatch();var product=useSelector(selectProduct);var isMobile=useThemeMediaQuery(function(theme){return theme.breakpoints.down('lg');});var routeParams=useParams();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),tabValue=_useState2[0],setTabValue=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),noProduct=_useState4[0],setNoProduct=_useState4[1];var methods=useForm({mode:'onChange',defaultValues:{},resolver:yupResolver(schema)});var reset=methods.reset,watch=methods.watch,control=methods.control,onChange=methods.onChange,formState=methods.formState;var form=watch();useDeepCompareEffect(function(){function updateProductState(){var productId=routeParams.productId;if(productId==='new'){/**\r\n         * Create New Product data\r\n         */dispatch(newProduct());}else{/**\r\n         * Get Product data\r\n         */dispatch(getProduct(productId)).then(function(action){/**\r\n           * If the requested product is not exist show message\r\n           */if(!action.payload){setNoProduct(true);}});}}updateProductState();},[dispatch,routeParams]);useEffect(function(){if(!product){return;}/**\r\n     * Reset the form on product state changes\r\n     */reset(product);},[product,reset]);useEffect(function(){return function(){/**\r\n       * Reset Product on component unload\r\n       */dispatch(resetProduct());setNoProduct(false);};},[dispatch]);/**\r\n   * Tab Change\r\n   */function handleTabChange(event,value){setTabValue(value);}/**\r\n   * Show Message if the requested products is not exists\r\n   */if(noProduct){return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:0.1}},className:\"flex flex-col flex-1 items-center justify-center h-full\",children:[/*#__PURE__*/_jsx(Typography,{color:\"text.secondary\",variant:\"h5\",children:\"There is no such product!\"}),/*#__PURE__*/_jsx(Button,{className:\"mt-24\",component:Link,variant:\"outlined\",to:\"/apps/e-commerce/products\",color:\"inherit\",children:\"Go to Products Page\"})]});}/**\r\n   * Wait while product data is loading and form is setted\r\n   */if(_.isEmpty(form)||product&&routeParams.productId!==product.id&&routeParams.productId!=='new'){return/*#__PURE__*/_jsx(FuseLoading,{});}return/*#__PURE__*/_jsx(FormProvider,_objectSpread(_objectSpread({},methods),{},{children:/*#__PURE__*/_jsx(FusePageCarded,{header:/*#__PURE__*/_jsx(ProductHeader,{}),content:/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Tabs,{value:tabValue,onChange:handleTabChange,indicatorColor:\"secondary\",textColor:\"secondary\",variant:\"scrollable\",scrollButtons:\"auto\",classes:{root:'w-full h-64 border-b-1'},children:[/*#__PURE__*/_jsx(Tab,{className:\"h-64\",label:\"Basic Info\"}),/*#__PURE__*/_jsx(Tab,{className:\"h-64\",label:\"Product Images\"}),/*#__PURE__*/_jsx(Tab,{className:\"h-64\",label:\"Pricing\"}),/*#__PURE__*/_jsx(Tab,{className:\"h-64\",label:\"Inventory\"}),/*#__PURE__*/_jsx(Tab,{className:\"h-64\",label:\"Shipping\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-16 sm:p-24 max-w-3xl\",children:[/*#__PURE__*/_jsx(\"div\",{className:tabValue!==0?'hidden':'',children:/*#__PURE__*/_jsx(BasicInfoTab,{})}),/*#__PURE__*/_jsx(\"div\",{className:tabValue!==1?'hidden':'',children:/*#__PURE__*/_jsx(ProductImagesTab,{})}),/*#__PURE__*/_jsx(\"div\",{className:tabValue!==2?'hidden':'',children:/*#__PURE__*/_jsx(PricingTab,{})}),/*#__PURE__*/_jsx(\"div\",{className:tabValue!==3?'hidden':'',children:/*#__PURE__*/_jsx(InventoryTab,{})}),/*#__PURE__*/_jsx(\"div\",{className:tabValue!==4?'hidden':'',children:/*#__PURE__*/_jsx(ShippingTab,{})})]})]}),scroll:isMobile?'normal':'content'})}));}export default withReducer('eCommerceApp',reducer)(Product);","map":null,"metadata":{},"sourceType":"module"}