{"ast":null,"code":"import _classCallCheck from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import FuseUtils from'@fuse/utils';import AppContext from'app/AppContext';import{Component}from'react';import{matchRoutes}from'react-router-dom';import withRouter from'@fuse/core/withRouter';import history from'@history';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var loginRedirectUrl=null;var FuseAuthorization=/*#__PURE__*/function(_Component){_inherits(FuseAuthorization,_Component);var _super=_createSuper(FuseAuthorization);function FuseAuthorization(props,context){var _this;_classCallCheck(this,FuseAuthorization);_this=_super.call(this,props);var routes=context.routes;_this.state={accessGranted:true,routes:routes};_this.defaultLoginRedirectUrl=props.loginRedirectUrl||'/';return _this;}_createClass(FuseAuthorization,[{key:\"componentDidMount\",value:function componentDidMount(){if(!this.state.accessGranted){this.redirectRoute();}}},{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps,nextState){return nextState.accessGranted!==this.state.accessGranted;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(!this.state.accessGranted){this.redirectRoute();}}},{key:\"redirectRoute\",value:function redirectRoute(){var _this$props=this.props,location=_this$props.location,userRole=_this$props.userRole;var pathname=location.pathname;var redirectUrl=loginRedirectUrl||this.defaultLoginRedirectUrl;/*\r\n        User is guest\r\n        Redirect to Login Page\r\n        */if(!userRole||userRole.length===0){setTimeout(function(){return history.push('/sign-in');},0);loginRedirectUrl=pathname;}else{/*\r\n        User is member\r\n        User must be on unAuthorized page or just logged in\r\n        Redirect to dashboard or loginRedirectUrl\r\n        */setTimeout(function(){return history.push(redirectUrl);},0);loginRedirectUrl=this.defaultLoginRedirectUrl;}}},{key:\"render\",value:function render(){// console.info('Fuse Authorization rendered', this.state.accessGranted);\nreturn this.state.accessGranted?/*#__PURE__*/_jsx(_Fragment,{children:this.props.children}):null;}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){var location=props.location,userRole=props.userRole;var pathname=location.pathname;var matchedRoutes=matchRoutes(state.routes,pathname);var matched=matchedRoutes?matchedRoutes[0]:false;return{accessGranted:matched?FuseUtils.hasPermission(matched.route.auth,userRole):true};}}]);return FuseAuthorization;}(Component);FuseAuthorization.contextType=AppContext;export default withRouter(FuseAuthorization);","map":null,"metadata":{},"sourceType":"module"}