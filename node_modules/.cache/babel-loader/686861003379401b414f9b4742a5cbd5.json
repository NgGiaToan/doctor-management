{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PathParamsDefined = void 0;\nconst pathRegex = /\\{([a-zA-Z0-9_.-]+)\\}+/g;\n\nconst PathParamsDefined = () => {\n  let pathTemplateParams;\n  let definedPathParams;\n  let currentPath;\n  return {\n    PathItem: {\n      enter(_, _ref) {\n        let {\n          key\n        } = _ref;\n        definedPathParams = new Set();\n        currentPath = key;\n        pathTemplateParams = new Set(Array.from(key.toString().matchAll(pathRegex)).map(m => m[1]));\n      },\n\n      Parameter(parameter, _ref2) {\n        let {\n          report,\n          location\n        } = _ref2;\n\n        if (parameter.in === 'path' && parameter.name) {\n          definedPathParams.add(parameter.name);\n\n          if (!pathTemplateParams.has(parameter.name)) {\n            report({\n              message: `Path parameter \\`${parameter.name}\\` is not used in the path \\`${currentPath}\\`.`,\n              location: location.child(['name'])\n            });\n          }\n        }\n      },\n\n      Operation: {\n        leave(_op, _ref3) {\n          let {\n            report,\n            location\n          } = _ref3;\n\n          for (const templateParam of Array.from(pathTemplateParams.keys())) {\n            if (!definedPathParams.has(templateParam)) {\n              report({\n                message: `The operation does not define the path parameter \\`{${templateParam}}\\` expected by path \\`${currentPath}\\`.`,\n                location: location.child(['parameters']).key() // report on operation\n\n              });\n            }\n          }\n        },\n\n        Parameter(parameter, _ref4) {\n          let {\n            report,\n            location\n          } = _ref4;\n\n          if (parameter.in === 'path' && parameter.name) {\n            definedPathParams.add(parameter.name);\n\n            if (!pathTemplateParams.has(parameter.name)) {\n              report({\n                message: `Path parameter \\`${parameter.name}\\` is not used in the path \\`${currentPath}\\`.`,\n                location: location.child(['name'])\n              });\n            }\n          }\n        }\n\n      }\n    }\n  };\n};\n\nexports.PathParamsDefined = PathParamsDefined;","map":{"version":3,"names":["Object","defineProperty","exports","value","PathParamsDefined","pathRegex","pathTemplateParams","definedPathParams","currentPath","PathItem","enter","_","key","Set","Array","from","toString","matchAll","map","m","Parameter","parameter","report","location","in","name","add","has","message","child","Operation","leave","_op","templateParam","keys"],"sources":["C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/node_modules/@redocly/openapi-core/lib/rules/common/path-params-defined.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PathParamsDefined = void 0;\nconst pathRegex = /\\{([a-zA-Z0-9_.-]+)\\}+/g;\nconst PathParamsDefined = () => {\n    let pathTemplateParams;\n    let definedPathParams;\n    let currentPath;\n    return {\n        PathItem: {\n            enter(_, { key }) {\n                definedPathParams = new Set();\n                currentPath = key;\n                pathTemplateParams = new Set(Array.from(key.toString().matchAll(pathRegex)).map((m) => m[1]));\n            },\n            Parameter(parameter, { report, location }) {\n                if (parameter.in === 'path' && parameter.name) {\n                    definedPathParams.add(parameter.name);\n                    if (!pathTemplateParams.has(parameter.name)) {\n                        report({\n                            message: `Path parameter \\`${parameter.name}\\` is not used in the path \\`${currentPath}\\`.`,\n                            location: location.child(['name']),\n                        });\n                    }\n                }\n            },\n            Operation: {\n                leave(_op, { report, location }) {\n                    for (const templateParam of Array.from(pathTemplateParams.keys())) {\n                        if (!definedPathParams.has(templateParam)) {\n                            report({\n                                message: `The operation does not define the path parameter \\`{${templateParam}}\\` expected by path \\`${currentPath}\\`.`,\n                                location: location.child(['parameters']).key(), // report on operation\n                            });\n                        }\n                    }\n                },\n                Parameter(parameter, { report, location }) {\n                    if (parameter.in === 'path' && parameter.name) {\n                        definedPathParams.add(parameter.name);\n                        if (!pathTemplateParams.has(parameter.name)) {\n                            report({\n                                message: `Path parameter \\`${parameter.name}\\` is not used in the path \\`${currentPath}\\`.`,\n                                location: location.child(['name']),\n                            });\n                        }\n                    }\n                },\n            },\n        },\n    };\n};\nexports.PathParamsDefined = PathParamsDefined;\n"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;EAAEC,KAAK,EAAE;AAAT,CAA7C;AACAD,OAAO,CAACE,iBAAR,GAA4B,KAAK,CAAjC;AACA,MAAMC,SAAS,GAAG,yBAAlB;;AACA,MAAMD,iBAAiB,GAAG,MAAM;EAC5B,IAAIE,kBAAJ;EACA,IAAIC,iBAAJ;EACA,IAAIC,WAAJ;EACA,OAAO;IACHC,QAAQ,EAAE;MACNC,KAAK,CAACC,CAAD,QAAa;QAAA,IAAT;UAAEC;QAAF,CAAS;QACdL,iBAAiB,GAAG,IAAIM,GAAJ,EAApB;QACAL,WAAW,GAAGI,GAAd;QACAN,kBAAkB,GAAG,IAAIO,GAAJ,CAAQC,KAAK,CAACC,IAAN,CAAWH,GAAG,CAACI,QAAJ,GAAeC,QAAf,CAAwBZ,SAAxB,CAAX,EAA+Ca,GAA/C,CAAoDC,CAAD,IAAOA,CAAC,CAAC,CAAD,CAA3D,CAAR,CAArB;MACH,CALK;;MAMNC,SAAS,CAACC,SAAD,SAAkC;QAAA,IAAtB;UAAEC,MAAF;UAAUC;QAAV,CAAsB;;QACvC,IAAIF,SAAS,CAACG,EAAV,KAAiB,MAAjB,IAA2BH,SAAS,CAACI,IAAzC,EAA+C;UAC3ClB,iBAAiB,CAACmB,GAAlB,CAAsBL,SAAS,CAACI,IAAhC;;UACA,IAAI,CAACnB,kBAAkB,CAACqB,GAAnB,CAAuBN,SAAS,CAACI,IAAjC,CAAL,EAA6C;YACzCH,MAAM,CAAC;cACHM,OAAO,EAAG,oBAAmBP,SAAS,CAACI,IAAK,gCAA+BjB,WAAY,KADpF;cAEHe,QAAQ,EAAEA,QAAQ,CAACM,KAAT,CAAe,CAAC,MAAD,CAAf;YAFP,CAAD,CAAN;UAIH;QACJ;MACJ,CAhBK;;MAiBNC,SAAS,EAAE;QACPC,KAAK,CAACC,GAAD,SAA4B;UAAA,IAAtB;YAAEV,MAAF;YAAUC;UAAV,CAAsB;;UAC7B,KAAK,MAAMU,aAAX,IAA4BnB,KAAK,CAACC,IAAN,CAAWT,kBAAkB,CAAC4B,IAAnB,EAAX,CAA5B,EAAmE;YAC/D,IAAI,CAAC3B,iBAAiB,CAACoB,GAAlB,CAAsBM,aAAtB,CAAL,EAA2C;cACvCX,MAAM,CAAC;gBACHM,OAAO,EAAG,uDAAsDK,aAAc,0BAAyBzB,WAAY,KADhH;gBAEHe,QAAQ,EAAEA,QAAQ,CAACM,KAAT,CAAe,CAAC,YAAD,CAAf,EAA+BjB,GAA/B,EAFP,CAE6C;;cAF7C,CAAD,CAAN;YAIH;UACJ;QACJ,CAVM;;QAWPQ,SAAS,CAACC,SAAD,SAAkC;UAAA,IAAtB;YAAEC,MAAF;YAAUC;UAAV,CAAsB;;UACvC,IAAIF,SAAS,CAACG,EAAV,KAAiB,MAAjB,IAA2BH,SAAS,CAACI,IAAzC,EAA+C;YAC3ClB,iBAAiB,CAACmB,GAAlB,CAAsBL,SAAS,CAACI,IAAhC;;YACA,IAAI,CAACnB,kBAAkB,CAACqB,GAAnB,CAAuBN,SAAS,CAACI,IAAjC,CAAL,EAA6C;cACzCH,MAAM,CAAC;gBACHM,OAAO,EAAG,oBAAmBP,SAAS,CAACI,IAAK,gCAA+BjB,WAAY,KADpF;gBAEHe,QAAQ,EAAEA,QAAQ,CAACM,KAAT,CAAe,CAAC,MAAD,CAAf;cAFP,CAAD,CAAN;YAIH;UACJ;QACJ;;MArBM;IAjBL;EADP,CAAP;AA2CH,CA/CD;;AAgDA3B,OAAO,CAACE,iBAAR,GAA4BA,iBAA5B"},"metadata":{},"sourceType":"script"}