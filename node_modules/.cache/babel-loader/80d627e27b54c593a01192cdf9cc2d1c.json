{"ast":null,"code":"import { createAsyncThunk, createEntityAdapter, createSelector, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport formatISO from 'date-fns/formatISO';\nimport { selectSelectedLabels } from './labelsSlice';\nexport const dateFormat = 'YYYY-MM-DDTHH:mm:ss.sssZ';\nexport const getEvents = createAsyncThunk('calendarApp/events/getEvents', async () => {\n  const response = await axios.get('/api/calendar/events');\n  const data = await response.data;\n  return data;\n});\nexport const addEvent = createAsyncThunk('calendarApp/events/addEvent', async (newEvent, _ref) => {\n  let {\n    dispatch\n  } = _ref;\n  const response = await axios.post('/api/calendar/events', newEvent);\n  const data = await response.data;\n  return data;\n});\nexport const updateEvent = createAsyncThunk('calendarApp/events/updateEvent', async (event, _ref2) => {\n  let {\n    dispatch\n  } = _ref2;\n  const response = await axios.put(`/api/calendar/events/${event.id}`, event);\n  const data = await response.data;\n  return data;\n});\nexport const removeEvent = createAsyncThunk('calendarApp/events/removeEvent', async (eventId, _ref3) => {\n  let {\n    dispatch\n  } = _ref3;\n  const response = await axios.delete(`/api/calendar/events/${eventId}`);\n  const data = await response.data;\n  return data;\n});\nconst eventsAdapter = createEntityAdapter({});\nexport const {\n  selectAll: selectEvents,\n  selectIds: selectEventIds,\n  selectById: selectEventById\n} = eventsAdapter.getSelectors(state => state.calendarApp.events);\nconst eventsSlice = createSlice({\n  name: 'calendarApp/events',\n  initialState: eventsAdapter.getInitialState({\n    eventDialog: {\n      type: 'new',\n      props: {\n        open: false,\n        anchorPosition: {\n          top: 200,\n          left: 400\n        }\n      },\n      data: null\n    }\n  }),\n  reducers: {\n    openNewEventDialog: {\n      prepare: selectInfo => {\n        const {\n          start,\n          end,\n          jsEvent\n        } = selectInfo;\n        const payload = {\n          type: 'new',\n          props: {\n            open: true,\n            anchorPosition: {\n              top: jsEvent.pageY,\n              left: jsEvent.pageX\n            }\n          },\n          data: {\n            start: formatISO(new Date(start)),\n            end: formatISO(new Date(end))\n          }\n        };\n        return {\n          payload\n        };\n      },\n      reducer: (state, action) => {\n        state.eventDialog = action.payload;\n      }\n    },\n    openEditEventDialog: {\n      prepare: clickInfo => {\n        const {\n          jsEvent,\n          event\n        } = clickInfo;\n        const {\n          id,\n          title,\n          allDay,\n          start,\n          end,\n          extendedProps\n        } = event;\n        const payload = {\n          type: 'edit',\n          props: {\n            open: true,\n            anchorPosition: {\n              top: jsEvent.pageY,\n              left: jsEvent.pageX\n            }\n          },\n          data: {\n            id,\n            title,\n            allDay,\n            extendedProps,\n            start: formatISO(new Date(start)),\n            end: formatISO(new Date(end))\n          }\n        };\n        return {\n          payload\n        };\n      },\n      reducer: (state, action) => {\n        state.eventDialog = action.payload;\n      }\n    },\n    closeNewEventDialog: (state, action) => {\n      state.eventDialog = {\n        type: 'new',\n        props: {\n          open: false,\n          anchorPosition: {\n            top: 200,\n            left: 400\n          }\n        },\n        data: null\n      };\n    },\n    closeEditEventDialog: (state, action) => {\n      state.eventDialog = {\n        type: 'edit',\n        props: {\n          open: false,\n          anchorPosition: {\n            top: 200,\n            left: 400\n          }\n        },\n        data: null\n      };\n    }\n  },\n  extraReducers: {\n    [getEvents.fulfilled]: eventsAdapter.setAll,\n    [addEvent.fulfilled]: eventsAdapter.addOne,\n    [updateEvent.fulfilled]: eventsAdapter.upsertOne,\n    [removeEvent.fulfilled]: eventsAdapter.removeOne\n  }\n});\nexport const {\n  openNewEventDialog,\n  closeNewEventDialog,\n  openEditEventDialog,\n  closeEditEventDialog\n} = eventsSlice.actions;\nexport const selectFilteredEvents = createSelector([selectSelectedLabels, selectEvents], (selectedLabels, events) => {\n  return events.filter(item => selectedLabels.includes(item.extendedProps.label));\n});\nexport const selectEventDialog = _ref4 => {\n  let {\n    calendarApp\n  } = _ref4;\n  return calendarApp.events.eventDialog;\n};\nexport default eventsSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createEntityAdapter","createSelector","createSlice","axios","formatISO","selectSelectedLabels","dateFormat","getEvents","response","get","data","addEvent","newEvent","dispatch","post","updateEvent","event","put","id","removeEvent","eventId","delete","eventsAdapter","selectAll","selectEvents","selectIds","selectEventIds","selectById","selectEventById","getSelectors","state","calendarApp","events","eventsSlice","name","initialState","getInitialState","eventDialog","type","props","open","anchorPosition","top","left","reducers","openNewEventDialog","prepare","selectInfo","start","end","jsEvent","payload","pageY","pageX","Date","reducer","action","openEditEventDialog","clickInfo","title","allDay","extendedProps","closeNewEventDialog","closeEditEventDialog","extraReducers","fulfilled","setAll","addOne","upsertOne","removeOne","actions","selectFilteredEvents","selectedLabels","filter","item","includes","label","selectEventDialog"],"sources":["C:/Users/giato/Downloads/Workspace/.Net/api/doctor-management-fe/src/app/main/apps/calendar/store/eventsSlice.js"],"sourcesContent":["import {\r\n  createAsyncThunk,\r\n  createEntityAdapter,\r\n  createSelector,\r\n  createSlice,\r\n} from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\nimport formatISO from 'date-fns/formatISO';\r\nimport { selectSelectedLabels } from './labelsSlice';\r\n\r\nexport const dateFormat = 'YYYY-MM-DDTHH:mm:ss.sssZ';\r\n\r\nexport const getEvents = createAsyncThunk('calendarApp/events/getEvents', async () => {\r\n  const response = await axios.get('/api/calendar/events');\r\n  const data = await response.data;\r\n\r\n  return data;\r\n});\r\n\r\nexport const addEvent = createAsyncThunk(\r\n  'calendarApp/events/addEvent',\r\n  async (newEvent, { dispatch }) => {\r\n    const response = await axios.post('/api/calendar/events', newEvent);\r\n    const data = await response.data;\r\n\r\n    return data;\r\n  }\r\n);\r\n\r\nexport const updateEvent = createAsyncThunk(\r\n  'calendarApp/events/updateEvent',\r\n  async (event, { dispatch }) => {\r\n    const response = await axios.put(`/api/calendar/events/${event.id}`, event);\r\n    const data = await response.data;\r\n\r\n    return data;\r\n  }\r\n);\r\n\r\nexport const removeEvent = createAsyncThunk(\r\n  'calendarApp/events/removeEvent',\r\n  async (eventId, { dispatch }) => {\r\n    const response = await axios.delete(`/api/calendar/events/${eventId}`);\r\n    const data = await response.data;\r\n\r\n    return data;\r\n  }\r\n);\r\n\r\nconst eventsAdapter = createEntityAdapter({});\r\n\r\nexport const {\r\n  selectAll: selectEvents,\r\n  selectIds: selectEventIds,\r\n  selectById: selectEventById,\r\n} = eventsAdapter.getSelectors((state) => state.calendarApp.events);\r\n\r\nconst eventsSlice = createSlice({\r\n  name: 'calendarApp/events',\r\n  initialState: eventsAdapter.getInitialState({\r\n    eventDialog: {\r\n      type: 'new',\r\n      props: {\r\n        open: false,\r\n        anchorPosition: { top: 200, left: 400 },\r\n      },\r\n      data: null,\r\n    },\r\n  }),\r\n  reducers: {\r\n    openNewEventDialog: {\r\n      prepare: (selectInfo) => {\r\n        const { start, end, jsEvent } = selectInfo;\r\n        const payload = {\r\n          type: 'new',\r\n          props: {\r\n            open: true,\r\n            anchorPosition: { top: jsEvent.pageY, left: jsEvent.pageX },\r\n          },\r\n          data: {\r\n            start: formatISO(new Date(start)),\r\n            end: formatISO(new Date(end)),\r\n          },\r\n        };\r\n        return { payload };\r\n      },\r\n      reducer: (state, action) => {\r\n        state.eventDialog = action.payload;\r\n      },\r\n    },\r\n    openEditEventDialog: {\r\n      prepare: (clickInfo) => {\r\n        const { jsEvent, event } = clickInfo;\r\n        const { id, title, allDay, start, end, extendedProps } = event;\r\n\r\n        const payload = {\r\n          type: 'edit',\r\n          props: {\r\n            open: true,\r\n            anchorPosition: { top: jsEvent.pageY, left: jsEvent.pageX },\r\n          },\r\n          data: {\r\n            id,\r\n            title,\r\n            allDay,\r\n            extendedProps,\r\n            start: formatISO(new Date(start)),\r\n            end: formatISO(new Date(end)),\r\n          },\r\n        };\r\n        return { payload };\r\n      },\r\n      reducer: (state, action) => {\r\n        state.eventDialog = action.payload;\r\n      },\r\n    },\r\n    closeNewEventDialog: (state, action) => {\r\n      state.eventDialog = {\r\n        type: 'new',\r\n        props: {\r\n          open: false,\r\n          anchorPosition: { top: 200, left: 400 },\r\n        },\r\n        data: null,\r\n      };\r\n    },\r\n    closeEditEventDialog: (state, action) => {\r\n      state.eventDialog = {\r\n        type: 'edit',\r\n        props: {\r\n          open: false,\r\n          anchorPosition: { top: 200, left: 400 },\r\n        },\r\n        data: null,\r\n      };\r\n    },\r\n  },\r\n  extraReducers: {\r\n    [getEvents.fulfilled]: eventsAdapter.setAll,\r\n    [addEvent.fulfilled]: eventsAdapter.addOne,\r\n    [updateEvent.fulfilled]: eventsAdapter.upsertOne,\r\n    [removeEvent.fulfilled]: eventsAdapter.removeOne,\r\n  },\r\n});\r\n\r\nexport const {\r\n  openNewEventDialog,\r\n  closeNewEventDialog,\r\n  openEditEventDialog,\r\n  closeEditEventDialog,\r\n} = eventsSlice.actions;\r\n\r\nexport const selectFilteredEvents = createSelector(\r\n  [selectSelectedLabels, selectEvents],\r\n  (selectedLabels, events) => {\r\n    return events.filter((item) => selectedLabels.includes(item.extendedProps.label));\r\n  }\r\n);\r\n\r\nexport const selectEventDialog = ({ calendarApp }) => calendarApp.events.eventDialog;\r\n\r\nexport default eventsSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}